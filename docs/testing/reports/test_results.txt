=== RUN   TestNewHTTPAdapter
--- PASS: TestNewHTTPAdapter (0.00s)
=== RUN   TestHTTPAdapter_Parse
=== RUN   TestHTTPAdapter_Parse/GET请求解析
=== RUN   TestHTTPAdapter_Parse/POST请求解析
=== RUN   TestHTTPAdapter_Parse/带Query参数的GET请求
=== RUN   TestHTTPAdapter_Parse/带多个Header的请求
--- PASS: TestHTTPAdapter_Parse (0.00s)
    --- PASS: TestHTTPAdapter_Parse/GET请求解析 (0.00s)
    --- PASS: TestHTTPAdapter_Parse/POST请求解析 (0.00s)
    --- PASS: TestHTTPAdapter_Parse/带Query参数的GET请求 (0.00s)
    --- PASS: TestHTTPAdapter_Parse/带多个Header的请求 (0.00s)
=== RUN   TestHTTPAdapter_Parse_EmptyBody
--- PASS: TestHTTPAdapter_Parse_EmptyBody (0.00s)
=== RUN   TestHTTPAdapter_Parse_InvalidInput
--- PASS: TestHTTPAdapter_Parse_InvalidInput (0.00s)
=== RUN   TestHTTPAdapter_Build
--- PASS: TestHTTPAdapter_Build (0.00s)
=== RUN   TestHTTPAdapter_WriteResponse
=== RUN   TestHTTPAdapter_WriteResponse/200_JSON响应
=== RUN   TestHTTPAdapter_WriteResponse/404错误响应
=== RUN   TestHTTPAdapter_WriteResponse/自定义Header响应
--- PASS: TestHTTPAdapter_WriteResponse (0.00s)
    --- PASS: TestHTTPAdapter_WriteResponse/200_JSON响应 (0.00s)
    --- PASS: TestHTTPAdapter_WriteResponse/404错误响应 (0.00s)
    --- PASS: TestHTTPAdapter_WriteResponse/自定义Header响应 (0.00s)
=== RUN   TestGetContentType
=== RUN   TestGetContentType/标准Content-Type
=== RUN   TestGetContentType/小写content-type
=== RUN   TestGetContentType/混合大小写
=== RUN   TestGetContentType/没有Content-Type
=== RUN   TestGetContentType/有其他Header但没有Content-Type
--- PASS: TestGetContentType (0.00s)
    --- PASS: TestGetContentType/标准Content-Type (0.00s)
    --- PASS: TestGetContentType/小写content-type (0.00s)
    --- PASS: TestGetContentType/混合大小写 (0.00s)
    --- PASS: TestGetContentType/没有Content-Type (0.00s)
    --- PASS: TestGetContentType/有其他Header但没有Content-Type (0.00s)
=== RUN   TestHTTPAdapter_Parse_ClientIP
--- PASS: TestHTTPAdapter_Parse_ClientIP (0.00s)
=== RUN   TestHTTPAdapter_Parse_Metadata
--- PASS: TestHTTPAdapter_Parse_Metadata (0.00s)
=== RUN   TestNewWebSocketAdapter
--- PASS: TestNewWebSocketAdapter (0.00s)
=== RUN   TestWebSocketAdapter_ConnectionManagement
{"level":"info","ts":1763376010.2566369,"caller":"logger/logger.go:89","msg":"websocket connection removed","connection_id":"test-conn-1"}
--- PASS: TestWebSocketAdapter_ConnectionManagement (0.00s)
=== RUN   TestWebSocketAdapter_MaxConnections
{"level":"warn","ts":1763376010.256734,"caller":"logger/logger.go:94","msg":"max connections reached","max":2}
--- PASS: TestWebSocketAdapter_MaxConnections (0.00s)
=== RUN   TestWebSocketAdapter_SendToConnection
--- PASS: TestWebSocketAdapter_SendToConnection (0.00s)
=== RUN   TestWebSocketAdapter_BroadcastMessage
--- PASS: TestWebSocketAdapter_BroadcastMessage (0.00s)
=== RUN   TestExtractHeaders
--- PASS: TestExtractHeaders (0.00s)
=== RUN   TestExtractQuery
--- PASS: TestExtractQuery (0.00s)
=== RUN   TestWebSocketAdapter_Upgrade
{"level":"info","ts":1763376010.2575,"caller":"logger/logger.go:89","msg":"websocket connection established","connection_id":"6a1dda4d-5976-4209-9c64-c1faa3e89d11","project_id":"proj1","environment_id":"env1"}
{"level":"info","ts":1763376010.358793,"caller":"logger/logger.go:89","msg":"websocket connection removed","connection_id":"6a1dda4d-5976-4209-9c64-c1faa3e89d11"}
--- PASS: TestWebSocketAdapter_Upgrade (0.10s)
PASS
coverage: 76.2% of statements
ok  	github.com/gomockserver/mockserver/internal/adapter	0.664s	coverage: 76.2% of statements
=== RUN   TestProjectHandler_CreateProject
=== RUN   TestProjectHandler_CreateProject/成功创建项目
=== RUN   TestProjectHandler_CreateProject/无效的JSON
=== RUN   TestProjectHandler_CreateProject/数据库错误
{"level":"error","ts":1763376011.3273191,"caller":"logger/logger.go:99","msg":"failed to create project","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).CreateProject\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:36\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_CreateProject.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:155\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_CreateProject (0.00s)
    --- PASS: TestProjectHandler_CreateProject/成功创建项目 (0.00s)
    --- PASS: TestProjectHandler_CreateProject/无效的JSON (0.00s)
    --- PASS: TestProjectHandler_CreateProject/数据库错误 (0.00s)
=== RUN   TestProjectHandler_GetProject
=== RUN   TestProjectHandler_GetProject/成功获取项目
=== RUN   TestProjectHandler_GetProject/项目不存在
=== RUN   TestProjectHandler_GetProject/数据库错误
{"level":"error","ts":1763376011.327704,"caller":"logger/logger.go:99","msg":"failed to get project","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).GetProject\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:62\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_GetProject.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:213\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_GetProject (0.00s)
    --- PASS: TestProjectHandler_GetProject/成功获取项目 (0.00s)
    --- PASS: TestProjectHandler_GetProject/项目不存在 (0.00s)
    --- PASS: TestProjectHandler_GetProject/数据库错误 (0.00s)
=== RUN   TestProjectHandler_UpdateProject
=== RUN   TestProjectHandler_UpdateProject/成功更新项目
=== RUN   TestProjectHandler_UpdateProject/无效的JSON
=== RUN   TestProjectHandler_UpdateProject/数据库错误
{"level":"error","ts":1763376011.3278878,"caller":"logger/logger.go:99","msg":"failed to update project","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).UpdateProject\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:88\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_UpdateProject.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:282\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_UpdateProject (0.00s)
    --- PASS: TestProjectHandler_UpdateProject/成功更新项目 (0.00s)
    --- PASS: TestProjectHandler_UpdateProject/无效的JSON (0.00s)
    --- PASS: TestProjectHandler_UpdateProject/数据库错误 (0.00s)
=== RUN   TestProjectHandler_DeleteProject
=== RUN   TestProjectHandler_DeleteProject/成功删除项目
=== RUN   TestProjectHandler_DeleteProject/数据库错误
{"level":"error","ts":1763376011.3279831,"caller":"logger/logger.go:99","msg":"failed to delete project","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).DeleteProject\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:101\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_DeleteProject.func3\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:329\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_DeleteProject (0.00s)
    --- PASS: TestProjectHandler_DeleteProject/成功删除项目 (0.00s)
    --- PASS: TestProjectHandler_DeleteProject/数据库错误 (0.00s)
=== RUN   TestProjectHandler_CreateEnvironment
=== RUN   TestProjectHandler_CreateEnvironment/成功创建环境
=== RUN   TestProjectHandler_CreateEnvironment/无效的JSON
=== RUN   TestProjectHandler_CreateEnvironment/数据库错误
{"level":"error","ts":1763376011.328192,"caller":"logger/logger.go:99","msg":"failed to create environment","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).CreateEnvironment\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:118\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_CreateEnvironment.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:395\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_CreateEnvironment (0.00s)
    --- PASS: TestProjectHandler_CreateEnvironment/成功创建环境 (0.00s)
    --- PASS: TestProjectHandler_CreateEnvironment/无效的JSON (0.00s)
    --- PASS: TestProjectHandler_CreateEnvironment/数据库错误 (0.00s)
=== RUN   TestProjectHandler_GetEnvironment
=== RUN   TestProjectHandler_GetEnvironment/成功获取环境
=== RUN   TestProjectHandler_GetEnvironment/环境不存在
=== RUN   TestProjectHandler_GetEnvironment/数据库错误
{"level":"error","ts":1763376011.328341,"caller":"logger/logger.go:99","msg":"failed to get environment","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).GetEnvironment\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:132\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_GetEnvironment.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:453\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_GetEnvironment (0.00s)
    --- PASS: TestProjectHandler_GetEnvironment/成功获取环境 (0.00s)
    --- PASS: TestProjectHandler_GetEnvironment/环境不存在 (0.00s)
    --- PASS: TestProjectHandler_GetEnvironment/数据库错误 (0.00s)
=== RUN   TestProjectHandler_ListEnvironments
=== RUN   TestProjectHandler_ListEnvironments/成功列出环境
=== RUN   TestProjectHandler_ListEnvironments/缺少project_id参数
=== RUN   TestProjectHandler_ListEnvironments/数据库错误
{"level":"error","ts":1763376011.328467,"caller":"logger/logger.go:99","msg":"failed to list environments","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).ListEnvironments\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:155\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_ListEnvironments.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:510\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_ListEnvironments (0.00s)
    --- PASS: TestProjectHandler_ListEnvironments/成功列出环境 (0.00s)
    --- PASS: TestProjectHandler_ListEnvironments/缺少project_id参数 (0.00s)
    --- PASS: TestProjectHandler_ListEnvironments/数据库错误 (0.00s)
=== RUN   TestProjectHandler_UpdateEnvironment
=== RUN   TestProjectHandler_UpdateEnvironment/成功更新环境
=== RUN   TestProjectHandler_UpdateEnvironment/无效的JSON
=== RUN   TestProjectHandler_UpdateEnvironment/数据库错误
{"level":"error","ts":1763376011.328614,"caller":"logger/logger.go:99","msg":"failed to update environment","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).UpdateEnvironment\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:178\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_UpdateEnvironment.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:579\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_UpdateEnvironment (0.00s)
    --- PASS: TestProjectHandler_UpdateEnvironment/成功更新环境 (0.00s)
    --- PASS: TestProjectHandler_UpdateEnvironment/无效的JSON (0.00s)
    --- PASS: TestProjectHandler_UpdateEnvironment/数据库错误 (0.00s)
=== RUN   TestProjectHandler_DeleteEnvironment
=== RUN   TestProjectHandler_DeleteEnvironment/成功删除环境
=== RUN   TestProjectHandler_DeleteEnvironment/数据库错误
{"level":"error","ts":1763376011.328732,"caller":"logger/logger.go:99","msg":"failed to delete environment","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).DeleteEnvironment\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:191\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_DeleteEnvironment.func3\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:626\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_DeleteEnvironment (0.00s)
    --- PASS: TestProjectHandler_DeleteEnvironment/成功删除环境 (0.00s)
    --- PASS: TestProjectHandler_DeleteEnvironment/数据库错误 (0.00s)
=== RUN   TestRuleHandler_CreateRule
=== RUN   TestRuleHandler_CreateRule/成功创建规则
=== RUN   TestRuleHandler_CreateRule/无效的JSON
=== RUN   TestRuleHandler_CreateRule/缺少必填字段_-_Name
=== RUN   TestRuleHandler_CreateRule/缺少必填字段_-_ProjectID
=== RUN   TestRuleHandler_CreateRule/数据库错误
{"level":"error","ts":1763376011.3289878,"caller":"logger/logger.go:99","msg":"failed to create rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).CreateRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_CreateRule.func6\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:167\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_CreateRule (0.00s)
    --- PASS: TestRuleHandler_CreateRule/成功创建规则 (0.00s)
    --- PASS: TestRuleHandler_CreateRule/无效的JSON (0.00s)
    --- PASS: TestRuleHandler_CreateRule/缺少必填字段_-_Name (0.00s)
    --- PASS: TestRuleHandler_CreateRule/缺少必填字段_-_ProjectID (0.00s)
    --- PASS: TestRuleHandler_CreateRule/数据库错误 (0.00s)
=== RUN   TestRuleHandler_GetRule
=== RUN   TestRuleHandler_GetRule/成功获取规则
=== RUN   TestRuleHandler_GetRule/规则不存在
=== RUN   TestRuleHandler_GetRule/数据库错误
{"level":"error","ts":1763376011.329144,"caller":"logger/logger.go:99","msg":"failed to get rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).GetRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:64\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_GetRule.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:234\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_GetRule (0.00s)
    --- PASS: TestRuleHandler_GetRule/成功获取规则 (0.00s)
    --- PASS: TestRuleHandler_GetRule/规则不存在 (0.00s)
    --- PASS: TestRuleHandler_GetRule/数据库错误 (0.00s)
=== RUN   TestRuleHandler_UpdateRule
=== RUN   TestRuleHandler_UpdateRule/成功更新规则
=== RUN   TestRuleHandler_UpdateRule/无效的JSON
=== RUN   TestRuleHandler_UpdateRule/数据库错误
{"level":"error","ts":1763376011.329272,"caller":"logger/logger.go:99","msg":"failed to update rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).UpdateRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:94\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_UpdateRule.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:311\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_UpdateRule (0.00s)
    --- PASS: TestRuleHandler_UpdateRule/成功更新规则 (0.00s)
    --- PASS: TestRuleHandler_UpdateRule/无效的JSON (0.00s)
    --- PASS: TestRuleHandler_UpdateRule/数据库错误 (0.00s)
=== RUN   TestRuleHandler_DeleteRule
=== RUN   TestRuleHandler_DeleteRule/成功删除规则
=== RUN   TestRuleHandler_DeleteRule/数据库错误
{"level":"error","ts":1763376011.329366,"caller":"logger/logger.go:99","msg":"failed to delete rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).DeleteRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:111\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_DeleteRule.func3\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:365\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_DeleteRule (0.00s)
    --- PASS: TestRuleHandler_DeleteRule/成功删除规则 (0.00s)
    --- PASS: TestRuleHandler_DeleteRule/数据库错误 (0.00s)
=== RUN   TestRuleHandler_ListRules
=== RUN   TestRuleHandler_ListRules/成功列出规则_-_默认参数
=== RUN   TestRuleHandler_ListRules/自定义分页参数
=== RUN   TestRuleHandler_ListRules/带过滤条件
=== RUN   TestRuleHandler_ListRules/数据库错误
{"level":"error","ts":1763376011.329636,"caller":"logger/logger.go:99","msg":"failed to list rules","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).ListRules\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:151\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_ListRules.func5\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:452\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_ListRules (0.00s)
    --- PASS: TestRuleHandler_ListRules/成功列出规则_-_默认参数 (0.00s)
    --- PASS: TestRuleHandler_ListRules/自定义分页参数 (0.00s)
    --- PASS: TestRuleHandler_ListRules/带过滤条件 (0.00s)
    --- PASS: TestRuleHandler_ListRules/数据库错误 (0.00s)
=== RUN   TestRuleHandler_EnableRule
=== RUN   TestRuleHandler_EnableRule/成功启用规则
=== RUN   TestRuleHandler_EnableRule/规则不存在
=== RUN   TestRuleHandler_EnableRule/查询时数据库错误
{"level":"error","ts":1763376011.3298728,"caller":"logger/logger.go:99","msg":"failed to get rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).EnableRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:174\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_EnableRule.func5\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:537\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
=== RUN   TestRuleHandler_EnableRule/更新时数据库错误
{"level":"error","ts":1763376011.329932,"caller":"logger/logger.go:99","msg":"failed to enable rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).EnableRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:186\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_EnableRule.func5\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:537\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_EnableRule (0.00s)
    --- PASS: TestRuleHandler_EnableRule/成功启用规则 (0.00s)
    --- PASS: TestRuleHandler_EnableRule/规则不存在 (0.00s)
    --- PASS: TestRuleHandler_EnableRule/查询时数据库错误 (0.00s)
    --- PASS: TestRuleHandler_EnableRule/更新时数据库错误 (0.00s)
=== RUN   TestRuleHandler_DisableRule
=== RUN   TestRuleHandler_DisableRule/成功禁用规则
=== RUN   TestRuleHandler_DisableRule/规则不存在
--- PASS: TestRuleHandler_DisableRule (0.00s)
    --- PASS: TestRuleHandler_DisableRule/成功禁用规则 (0.00s)
    --- PASS: TestRuleHandler_DisableRule/规则不存在 (0.00s)
=== RUN   TestRequestLogAPIIntegration
=== RUN   TestRequestLogAPIIntegration/List_request_logs
=== RUN   TestRequestLogAPIIntegration/Get_request_log_by_ID
=== RUN   TestRequestLogAPIIntegration/Get_statistics
--- PASS: TestRequestLogAPIIntegration (0.07s)
    --- PASS: TestRequestLogAPIIntegration/List_request_logs (0.01s)
    --- PASS: TestRequestLogAPIIntegration/Get_request_log_by_ID (0.00s)
    --- PASS: TestRequestLogAPIIntegration/Get_statistics (0.01s)
=== RUN   TestHealthAPIIntegration
=== RUN   TestHealthAPIIntegration/Health_check
=== RUN   TestHealthAPIIntegration/System_metrics
=== RUN   TestHealthAPIIntegration/Liveness_probe
=== RUN   TestHealthAPIIntegration/Readiness_probe
--- PASS: TestHealthAPIIntegration (0.02s)
    --- PASS: TestHealthAPIIntegration/Health_check (0.01s)
    --- PASS: TestHealthAPIIntegration/System_metrics (0.00s)
    --- PASS: TestHealthAPIIntegration/Liveness_probe (0.00s)
    --- PASS: TestHealthAPIIntegration/Readiness_probe (0.00s)
=== RUN   TestStatisticsAPIIntegration
=== RUN   TestStatisticsAPIIntegration/Get_overview_statistics
=== RUN   TestStatisticsAPIIntegration/Get_realtime_statistics
=== RUN   TestStatisticsAPIIntegration/Get_trend_analysis
=== RUN   TestStatisticsAPIIntegration/Get_comparison_analysis
--- PASS: TestStatisticsAPIIntegration (0.08s)
    --- PASS: TestStatisticsAPIIntegration/Get_overview_statistics (0.01s)
    --- PASS: TestStatisticsAPIIntegration/Get_realtime_statistics (0.01s)
    --- PASS: TestStatisticsAPIIntegration/Get_trend_analysis (0.03s)
    --- PASS: TestStatisticsAPIIntegration/Get_comparison_analysis (0.01s)
PASS
coverage: 69.0% of statements
ok  	github.com/gomockserver/mockserver/internal/api	0.906s	coverage: 69.0% of statements
=== RUN   TestLoad_ValidConfig
--- PASS: TestLoad_ValidConfig (0.00s)
=== RUN   TestLoad_FileNotFound
--- PASS: TestLoad_FileNotFound (0.00s)
=== RUN   TestLoad_InvalidYAML
--- PASS: TestLoad_InvalidYAML (0.00s)
=== RUN   TestLoad_WithoutPath
--- PASS: TestLoad_WithoutPath (0.00s)
=== RUN   TestGet
--- PASS: TestGet (0.00s)
=== RUN   TestConfig_GetAdminAddress
=== RUN   TestConfig_GetAdminAddress/默认地址
=== RUN   TestConfig_GetAdminAddress/自定义地址
=== RUN   TestConfig_GetAdminAddress/域名地址
--- PASS: TestConfig_GetAdminAddress (0.00s)
    --- PASS: TestConfig_GetAdminAddress/默认地址 (0.00s)
    --- PASS: TestConfig_GetAdminAddress/自定义地址 (0.00s)
    --- PASS: TestConfig_GetAdminAddress/域名地址 (0.00s)
=== RUN   TestConfig_GetMockAddress
=== RUN   TestConfig_GetMockAddress/默认地址
=== RUN   TestConfig_GetMockAddress/自定义地址
--- PASS: TestConfig_GetMockAddress (0.00s)
    --- PASS: TestConfig_GetMockAddress/默认地址 (0.00s)
    --- PASS: TestConfig_GetMockAddress/自定义地址 (0.00s)
=== RUN   TestLoad_CompleteConfig
--- PASS: TestLoad_CompleteConfig (0.00s)
=== RUN   TestLoad_MinimalConfig
--- PASS: TestLoad_MinimalConfig (0.00s)
=== RUN   TestLoad_PartialConfig
--- PASS: TestLoad_PartialConfig (0.00s)
=== RUN   TestConfigStructure
--- PASS: TestConfigStructure (0.00s)
PASS
coverage: 94.4% of statements
ok  	github.com/gomockserver/mockserver/internal/config	1.895s	coverage: 94.4% of statements
=== RUN   TestCommonRegexPatterns
--- PASS: TestCommonRegexPatterns (0.00s)
=== RUN   TestPrecompileCommonPatterns
--- PASS: TestPrecompileCommonPatterns (0.00s)
=== RUN   TestLRURegexCache
--- PASS: TestLRURegexCache (0.00s)
=== RUN   TestLRURegexCache_Size
--- PASS: TestLRURegexCache_Size (0.00s)
=== RUN   TestLRURegexCache_Clear
--- PASS: TestLRURegexCache_Clear (0.00s)
=== RUN   TestRegexCacheStats
--- PASS: TestRegexCacheStats (0.00s)
=== RUN   TestRegexCacheLRU
--- PASS: TestRegexCacheLRU (0.00s)
=== RUN   TestRegexMatchWithCache
--- PASS: TestRegexMatchWithCache (0.00s)
=== RUN   TestMatchMethod
=== RUN   TestMatchMethod/单个方法精确匹配
=== RUN   TestMatchMethod/单个方法不匹配
=== RUN   TestMatchMethod/方法数组匹配
=== RUN   TestMatchMethod/方法数组不匹配
=== RUN   TestMatchMethod/大小写不敏感
--- PASS: TestMatchMethod (0.00s)
    --- PASS: TestMatchMethod/单个方法精确匹配 (0.00s)
    --- PASS: TestMatchMethod/单个方法不匹配 (0.00s)
    --- PASS: TestMatchMethod/方法数组匹配 (0.00s)
    --- PASS: TestMatchMethod/方法数组不匹配 (0.00s)
    --- PASS: TestMatchMethod/大小写不敏感 (0.00s)
=== RUN   TestMatchPath
=== RUN   TestMatchPath/精确路径匹配
=== RUN   TestMatchPath/路径不匹配
=== RUN   TestMatchPath/路径参数匹配
=== RUN   TestMatchPath/多级路径参数匹配
=== RUN   TestMatchPath/路径段数不匹配
--- PASS: TestMatchPath (0.00s)
    --- PASS: TestMatchPath/精确路径匹配 (0.00s)
    --- PASS: TestMatchPath/路径不匹配 (0.00s)
    --- PASS: TestMatchPath/路径参数匹配 (0.00s)
    --- PASS: TestMatchPath/多级路径参数匹配 (0.00s)
    --- PASS: TestMatchPath/路径段数不匹配 (0.00s)
=== RUN   TestMatchQuery
=== RUN   TestMatchQuery/单个参数匹配
=== RUN   TestMatchQuery/多个参数全部匹配
=== RUN   TestMatchQuery/参数值不匹配
=== RUN   TestMatchQuery/缺少必需参数
=== RUN   TestMatchQuery/空条件匹配
--- PASS: TestMatchQuery (0.00s)
    --- PASS: TestMatchQuery/单个参数匹配 (0.00s)
    --- PASS: TestMatchQuery/多个参数全部匹配 (0.00s)
    --- PASS: TestMatchQuery/参数值不匹配 (0.00s)
    --- PASS: TestMatchQuery/缺少必需参数 (0.00s)
    --- PASS: TestMatchQuery/空条件匹配 (0.00s)
=== RUN   TestMatchHeaders
=== RUN   TestMatchHeaders/Content-Type匹配(不区分大小写)
=== RUN   TestMatchHeaders/自定义Header匹配
=== RUN   TestMatchHeaders/Header值不匹配
=== RUN   TestMatchHeaders/多个Header匹配
--- PASS: TestMatchHeaders (0.00s)
    --- PASS: TestMatchHeaders/Content-Type匹配(不区分大小写) (0.00s)
    --- PASS: TestMatchHeaders/自定义Header匹配 (0.00s)
    --- PASS: TestMatchHeaders/Header值不匹配 (0.00s)
    --- PASS: TestMatchHeaders/多个Header匹配 (0.00s)
=== RUN   TestSimpleMatch
=== RUN   TestSimpleMatch/完整HTTP请求匹配
=== RUN   TestSimpleMatch/路径参数匹配
=== RUN   TestSimpleMatch/方法不匹配
--- PASS: TestSimpleMatch (0.00s)
    --- PASS: TestSimpleMatch/完整HTTP请求匹配 (0.00s)
    --- PASS: TestSimpleMatch/路径参数匹配 (0.00s)
    --- PASS: TestSimpleMatch/方法不匹配 (0.00s)
=== RUN   TestNewMatchEngine
--- PASS: TestNewMatchEngine (0.00s)
=== RUN   TestMatch
=== RUN   TestMatch/成功匹配第一条规则
{"level":"info","ts":1763376011.9393039,"caller":"logger/logger.go:89","msg":"rule matched","rule_id":"rule-1","rule_name":"规则1"}
=== RUN   TestMatch/匹配高优先级规则
{"level":"info","ts":1763376011.939414,"caller":"logger/logger.go:89","msg":"rule matched","rule_id":"rule-high","rule_name":"高优先级规则"}
=== RUN   TestMatch/没有匹配的规则
=== RUN   TestMatch/空规则列表
=== RUN   TestMatch/协议类型不匹配
--- PASS: TestMatch (0.00s)
    --- PASS: TestMatch/成功匹配第一条规则 (0.00s)
    --- PASS: TestMatch/匹配高优先级规则 (0.00s)
    --- PASS: TestMatch/没有匹配的规则 (0.00s)
    --- PASS: TestMatch/空规则列表 (0.00s)
    --- PASS: TestMatch/协议类型不匹配 (0.00s)
=== RUN   TestMatchIPWhitelist
=== RUN   TestMatchIPWhitelist/IP在白名单内
=== RUN   TestMatchIPWhitelist/IP不在白名单内
=== RUN   TestMatchIPWhitelist/空白名单
=== RUN   TestMatchIPWhitelist/单个IP白名单匹配
=== RUN   TestMatchIPWhitelist/localhost匹配
=== RUN   TestMatchIPWhitelist/CIDR格式匹配成功
=== RUN   TestMatchIPWhitelist/CIDR格式匹配失败
=== RUN   TestMatchIPWhitelist/混合格式白名单匹配
=== RUN   TestMatchIPWhitelist/IPv6_CIDR匹配
=== RUN   TestMatchIPWhitelist/无效CIDR格式
{"level":"warn","ts":1763376011.939614,"caller":"logger/logger.go:94","msg":"invalid IP format in whitelist","ip":"invalid-cidr"}
=== RUN   TestMatchIPWhitelist/无效IP地址
{"level":"warn","ts":1763376011.939629,"caller":"logger/logger.go:94","msg":"invalid request IP address","ip":"invalid-ip"}
=== RUN   TestMatchIPWhitelist/边界IP匹配
=== RUN   TestMatchIPWhitelist/边界IP匹配2
=== RUN   TestMatchIPWhitelist/超出CIDR范围
--- PASS: TestMatchIPWhitelist (0.00s)
    --- PASS: TestMatchIPWhitelist/IP在白名单内 (0.00s)
    --- PASS: TestMatchIPWhitelist/IP不在白名单内 (0.00s)
    --- PASS: TestMatchIPWhitelist/空白名单 (0.00s)
    --- PASS: TestMatchIPWhitelist/单个IP白名单匹配 (0.00s)
    --- PASS: TestMatchIPWhitelist/localhost匹配 (0.00s)
    --- PASS: TestMatchIPWhitelist/CIDR格式匹配成功 (0.00s)
    --- PASS: TestMatchIPWhitelist/CIDR格式匹配失败 (0.00s)
    --- PASS: TestMatchIPWhitelist/混合格式白名单匹配 (0.00s)
    --- PASS: TestMatchIPWhitelist/IPv6_CIDR匹配 (0.00s)
    --- PASS: TestMatchIPWhitelist/无效CIDR格式 (0.00s)
    --- PASS: TestMatchIPWhitelist/无效IP地址 (0.00s)
    --- PASS: TestMatchIPWhitelist/边界IP匹配 (0.00s)
    --- PASS: TestMatchIPWhitelist/边界IP匹配2 (0.00s)
    --- PASS: TestMatchIPWhitelist/超出CIDR范围 (0.00s)
=== RUN   TestSimpleMatch_WithIPWhitelist
=== RUN   TestSimpleMatch_WithIPWhitelist/IP白名单匹配成功
=== RUN   TestSimpleMatch_WithIPWhitelist/IP白名单匹配失败
=== RUN   TestSimpleMatch_WithIPWhitelist/无IP白名单限制
--- PASS: TestSimpleMatch_WithIPWhitelist (0.00s)
    --- PASS: TestSimpleMatch_WithIPWhitelist/IP白名单匹配成功 (0.00s)
    --- PASS: TestSimpleMatch_WithIPWhitelist/IP白名单匹配失败 (0.00s)
    --- PASS: TestSimpleMatch_WithIPWhitelist/无IP白名单限制 (0.00s)
=== RUN   TestMatchRule
=== RUN   TestMatchRule/简单匹配类型
=== RUN   TestMatchRule/正则匹配类型(已实现)
=== RUN   TestMatchRule/脚本匹配类型(未实现)
=== RUN   TestMatchRule/不支持的匹配类型
--- PASS: TestMatchRule (0.00s)
    --- PASS: TestMatchRule/简单匹配类型 (0.00s)
    --- PASS: TestMatchRule/正则匹配类型(已实现) (0.00s)
    --- PASS: TestMatchRule/脚本匹配类型(未实现) (0.00s)
    --- PASS: TestMatchRule/不支持的匹配类型 (0.00s)
=== RUN   TestSimpleMatch_ComplexConditions
=== RUN   TestSimpleMatch_ComplexConditions/所有条件都匹配
=== RUN   TestSimpleMatch_ComplexConditions/Query参数不完全匹配
=== RUN   TestSimpleMatch_ComplexConditions/Header不匹配
=== RUN   TestSimpleMatch_ComplexConditions/IP白名单不匹配导致整体不匹配
--- PASS: TestSimpleMatch_ComplexConditions (0.00s)
    --- PASS: TestSimpleMatch_ComplexConditions/所有条件都匹配 (0.00s)
    --- PASS: TestSimpleMatch_ComplexConditions/Query参数不完全匹配 (0.00s)
    --- PASS: TestSimpleMatch_ComplexConditions/Header不匹配 (0.00s)
    --- PASS: TestSimpleMatch_ComplexConditions/IP白名单不匹配导致整体不匹配 (0.00s)
=== RUN   TestSimpleMatch_EdgeCases
=== RUN   TestSimpleMatch_EdgeCases/空路径条件
=== RUN   TestSimpleMatch_EdgeCases/空Method条件
=== RUN   TestSimpleMatch_EdgeCases/非HTTP协议
--- PASS: TestSimpleMatch_EdgeCases (0.00s)
    --- PASS: TestSimpleMatch_EdgeCases/空路径条件 (0.00s)
    --- PASS: TestSimpleMatch_EdgeCases/空Method条件 (0.00s)
    --- PASS: TestSimpleMatch_EdgeCases/非HTTP协议 (0.00s)
=== RUN   TestValidateRegexPattern
=== RUN   TestValidateRegexPattern/Valid_simple_pattern
=== RUN   TestValidateRegexPattern/Valid_complex_pattern
=== RUN   TestValidateRegexPattern/Pattern_too_long
=== RUN   TestValidateRegexPattern/Nesting_too_deep
=== RUN   TestValidateRegexPattern/Dangerous_nested_wildcards
=== RUN   TestValidateRegexPattern/Dangerous_wildcard_plus
=== RUN   TestValidateRegexPattern/Dangerous_wildcard_repetition
=== RUN   TestValidateRegexPattern/Catastrophic_backtracking
=== RUN   TestValidateRegexPattern/Excessive_repetition_range
=== RUN   TestValidateRegexPattern/High_quantifier_count
=== RUN   TestValidateRegexPattern/Valid_repetition_range
=== RUN   TestValidateRegexPattern/Valid_quantifier_count
--- PASS: TestValidateRegexPattern (0.00s)
    --- PASS: TestValidateRegexPattern/Valid_simple_pattern (0.00s)
    --- PASS: TestValidateRegexPattern/Valid_complex_pattern (0.00s)
    --- PASS: TestValidateRegexPattern/Pattern_too_long (0.00s)
    --- PASS: TestValidateRegexPattern/Nesting_too_deep (0.00s)
    --- PASS: TestValidateRegexPattern/Dangerous_nested_wildcards (0.00s)
    --- PASS: TestValidateRegexPattern/Dangerous_wildcard_plus (0.00s)
    --- PASS: TestValidateRegexPattern/Dangerous_wildcard_repetition (0.00s)
    --- PASS: TestValidateRegexPattern/Catastrophic_backtracking (0.00s)
    --- PASS: TestValidateRegexPattern/Excessive_repetition_range (0.00s)
    --- PASS: TestValidateRegexPattern/High_quantifier_count (0.00s)
    --- PASS: TestValidateRegexPattern/Valid_repetition_range (0.00s)
    --- PASS: TestValidateRegexPattern/Valid_quantifier_count (0.00s)
=== RUN   TestRegexValidationError
--- PASS: TestRegexValidationError (0.00s)
=== RUN   TestNewScriptEngine
--- PASS: TestNewScriptEngine (0.00s)
=== RUN   TestScriptEngine_Match_SimpleScript
{"level":"info","ts":1763376011.940684,"caller":"logger/logger.go:89","msg":"script execution","rule_id":"rule-1","rule_name":"Test Rule","duration":0.000571542,"result":true}
--- PASS: TestScriptEngine_Match_SimpleScript (0.00s)
=== RUN   TestScriptEngine_Match_HeaderCheck
{"level":"info","ts":1763376011.94089,"caller":"logger/logger.go:89","msg":"script execution","rule_id":"rule-2","rule_name":"","duration":0.000185875,"result":true}
--- PASS: TestScriptEngine_Match_HeaderCheck (0.00s)
=== RUN   TestScriptEngine_Match_QueryCheck
{"level":"info","ts":1763376011.9409401,"caller":"logger/logger.go:89","msg":"script execution","rule_id":"rule-3","rule_name":"","duration":0.0000345,"result":true}
--- PASS: TestScriptEngine_Match_QueryCheck (0.00s)
=== RUN   TestScriptEngine_Match_ComplexLogic
{"level":"info","ts":1763376011.94107,"caller":"logger/logger.go:89","msg":"script execution","rule_id":"rule-4","rule_name":"","duration":0.000083209,"result":true}
--- PASS: TestScriptEngine_Match_ComplexLogic (0.00s)
=== RUN   TestScriptEngine_Match_NoMatch
{"level":"info","ts":1763376011.9411032,"caller":"logger/logger.go:89","msg":"script execution","rule_id":"rule-5","rule_name":"","duration":0.00001875,"result":false}
--- PASS: TestScriptEngine_Match_NoMatch (0.00s)
=== RUN   TestScriptEngine_Match_InvalidScript
{"level":"error","ts":1763376011.9411619,"caller":"logger/logger.go:99","msg":"script execution error","script":"this is not valid javascript code {{{","error":"SyntaxError: SyntaxError: (anonymous): Line 1:6 Unexpected identifier (and 5 more errors)","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/engine.(*ScriptEngine).executeScript\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/engine/script_engine.go:112\ngithub.com/gomockserver/mockserver/internal/engine.(*ScriptEngine).Match\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/engine/script_engine.go:68\ngithub.com/gomockserver/mockserver/internal/engine.TestScriptEngine_Match_InvalidScript\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/engine/script_engine_test.go:176\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
{"level":"info","ts":1763376011.941205,"caller":"logger/logger.go:89","msg":"script execution","rule_id":"rule-6","rule_name":"","duration":0.000087458,"result":false,"error":"script execution failed: SyntaxError: SyntaxError: (anonymous): Line 1:6 Unexpected identifier (and 5 more errors)"}
--- PASS: TestScriptEngine_Match_InvalidScript (0.00s)
=== RUN   TestScriptEngine_Match_NonBooleanReturn
{"level":"info","ts":1763376011.9412322,"caller":"logger/logger.go:89","msg":"script execution","rule_id":"rule-7","rule_name":"","duration":0.000013708,"result":false,"error":"script must return a boolean value"}
--- PASS: TestScriptEngine_Match_NonBooleanReturn (0.00s)
=== RUN   TestScriptEngine_Match_Timeout
{"level":"error","ts":1763376012.0421,"caller":"logger/logger.go:99","msg":"script execution error","script":"\n\t\t\t\t// 无限循环导致超时\n\t\t\t\twhile(true) {}\n\t\t\t\ttrue\n\t\t\t","error":"execution timeout at <eval>:1:1(0)","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/engine.(*ScriptEngine).executeScript\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/engine/script_engine.go:112\ngithub.com/gomockserver/mockserver/internal/engine.(*ScriptEngine).Match\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/engine/script_engine.go:68\ngithub.com/gomockserver/mockserver/internal/engine.TestScriptEngine_Match_Timeout\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/engine/script_engine_test.go:224\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
{"level":"info","ts":1763376012.042148,"caller":"logger/logger.go:89","msg":"script execution","rule_id":"rule-8","rule_name":"","duration":0.100891125,"result":false,"error":"script execution failed: execution timeout at <eval>:1:1(0)"}
--- PASS: TestScriptEngine_Match_Timeout (0.10s)
=== RUN   TestScriptEngine_Match_WrongRuleType
--- PASS: TestScriptEngine_Match_WrongRuleType (0.00s)
=== RUN   TestScriptEngine_Match_MissingScript
--- PASS: TestScriptEngine_Match_MissingScript (0.00s)
PASS
coverage: 80.9% of statements
ok  	github.com/gomockserver/mockserver/internal/engine	1.446s	coverage: 80.9% of statements
=== RUN   TestCalculateDelay
=== RUN   TestCalculateDelay/固定延迟
=== RUN   TestCalculateDelay/随机延迟
=== RUN   TestCalculateDelay/正态分布延迟(暂返回均值)
=== RUN   TestCalculateDelay/无效延迟类型
--- PASS: TestCalculateDelay (0.00s)
    --- PASS: TestCalculateDelay/固定延迟 (0.00s)
    --- PASS: TestCalculateDelay/随机延迟 (0.00s)
    --- PASS: TestCalculateDelay/正态分布延迟(暂返回均值) (0.00s)
    --- PASS: TestCalculateDelay/无效延迟类型 (0.00s)
=== RUN   TestGetDefaultContentType
=== RUN   TestGetDefaultContentType/JSON
=== RUN   TestGetDefaultContentType/XML
=== RUN   TestGetDefaultContentType/HTML
=== RUN   TestGetDefaultContentType/Text
=== RUN   TestGetDefaultContentType/Binary
=== RUN   TestGetDefaultContentType/默认
--- PASS: TestGetDefaultContentType (0.00s)
    --- PASS: TestGetDefaultContentType/JSON (0.00s)
    --- PASS: TestGetDefaultContentType/XML (0.00s)
    --- PASS: TestGetDefaultContentType/HTML (0.00s)
    --- PASS: TestGetDefaultContentType/Text (0.00s)
    --- PASS: TestGetDefaultContentType/Binary (0.00s)
    --- PASS: TestGetDefaultContentType/默认 (0.00s)
=== RUN   TestStaticJSONResponse
--- PASS: TestStaticJSONResponse (0.00s)
=== RUN   TestStaticTextResponse
--- PASS: TestStaticTextResponse (0.00s)
=== RUN   TestResponseWithDelay
--- PASS: TestResponseWithDelay (0.05s)
=== RUN   TestGetDefaultResponse
--- PASS: TestGetDefaultResponse (0.00s)
=== RUN   TestUnsupportedResponseType
=== RUN   TestUnsupportedResponseType/Script响应
--- PASS: TestUnsupportedResponseType (0.00s)
    --- PASS: TestUnsupportedResponseType/Script响应 (0.00s)
=== RUN   TestDifferentStatusCodes
=== RUN   TestDifferentStatusCodes/È
=== RUN   TestDifferentStatusCodes/É
=== RUN   TestDifferentStatusCodes/Ì
=== RUN   TestDifferentStatusCodes/Ɛ
=== RUN   TestDifferentStatusCodes/Ɣ
=== RUN   TestDifferentStatusCodes/Ǵ
=== RUN   TestDifferentStatusCodes/Ƿ
--- PASS: TestDifferentStatusCodes (0.00s)
    --- PASS: TestDifferentStatusCodes/È (0.00s)
    --- PASS: TestDifferentStatusCodes/É (0.00s)
    --- PASS: TestDifferentStatusCodes/Ì (0.00s)
    --- PASS: TestDifferentStatusCodes/Ɛ (0.00s)
    --- PASS: TestDifferentStatusCodes/Ɣ (0.00s)
    --- PASS: TestDifferentStatusCodes/Ǵ (0.00s)
    --- PASS: TestDifferentStatusCodes/Ƿ (0.00s)
=== RUN   TestXMLResponse
--- PASS: TestXMLResponse (0.00s)
=== RUN   TestHTMLResponse
--- PASS: TestHTMLResponse (0.00s)
=== RUN   TestNonHTTPProtocol
=== RUN   TestNonHTTPProtocol/gRPC协议
=== RUN   TestNonHTTPProtocol/WebSocket协议
=== RUN   TestNonHTTPProtocol/TCP协议
--- PASS: TestNonHTTPProtocol (0.00s)
    --- PASS: TestNonHTTPProtocol/gRPC协议 (0.00s)
    --- PASS: TestNonHTTPProtocol/WebSocket协议 (0.00s)
    --- PASS: TestNonHTTPProtocol/TCP协议 (0.00s)
=== RUN   TestInvalidResponseContent
--- PASS: TestInvalidResponseContent (0.00s)
=== RUN   TestEmptyAndNilBody
=== RUN   TestEmptyAndNilBody/JSON空对象
=== RUN   TestEmptyAndNilBody/Text空字符串
=== RUN   TestEmptyAndNilBody/XML空字符串
=== RUN   TestEmptyAndNilBody/HTML空字符串
--- PASS: TestEmptyAndNilBody (0.00s)
    --- PASS: TestEmptyAndNilBody/JSON空对象 (0.00s)
    --- PASS: TestEmptyAndNilBody/Text空字符串 (0.00s)
    --- PASS: TestEmptyAndNilBody/XML空字符串 (0.00s)
    --- PASS: TestEmptyAndNilBody/HTML空字符串 (0.00s)
=== RUN   TestSpecialCharacters
=== RUN   TestSpecialCharacters/中文字符
=== RUN   TestSpecialCharacters/特殊符号
=== RUN   TestSpecialCharacters/换行和制表符
=== RUN   TestSpecialCharacters/Emoji表情
=== RUN   TestSpecialCharacters/XML特殊字符
--- PASS: TestSpecialCharacters (0.00s)
    --- PASS: TestSpecialCharacters/中文字符 (0.00s)
    --- PASS: TestSpecialCharacters/特殊符号 (0.00s)
    --- PASS: TestSpecialCharacters/换行和制表符 (0.00s)
    --- PASS: TestSpecialCharacters/Emoji表情 (0.00s)
    --- PASS: TestSpecialCharacters/XML特殊字符 (0.00s)
=== RUN   TestLargeResponseBody
--- PASS: TestLargeResponseBody (0.02s)
=== RUN   TestBinaryContentType
{"level":"warn","ts":1763376013.1459498,"caller":"logger/logger.go:94","msg":"failed to decode base64 binary data, returning raw data","error":"illegal base64 data at input byte 7"}
--- PASS: TestBinaryContentType (0.00s)
=== RUN   TestUnknownContentType
--- PASS: TestUnknownContentType (0.00s)
=== RUN   TestRandomDelayBoundary
=== RUN   TestRandomDelayBoundary/Min等于Max
=== RUN   TestRandomDelayBoundary/Min大于Max
=== RUN   TestRandomDelayBoundary/Min为0
--- PASS: TestRandomDelayBoundary (0.00s)
    --- PASS: TestRandomDelayBoundary/Min等于Max (0.00s)
    --- PASS: TestRandomDelayBoundary/Min大于Max (0.00s)
    --- PASS: TestRandomDelayBoundary/Min为0 (0.00s)
=== RUN   TestDelayWithRandomVariation
--- PASS: TestDelayWithRandomVariation (0.00s)
=== RUN   TestResponseWithCustomHeaders
--- PASS: TestResponseWithCustomHeaders (0.00s)
=== RUN   TestResponseWithoutHeaders
--- PASS: TestResponseWithoutHeaders (0.00s)
=== RUN   TestComplexJSONBody
--- PASS: TestComplexJSONBody (0.00s)
=== RUN   TestNonStringBodyForTextType
--- PASS: TestNonStringBodyForTextType (0.00s)
=== RUN   TestStepDelayType
--- PASS: TestStepDelayType (0.00s)
=== RUN   TestTemplateEngine_Render
=== RUN   TestTemplateEngine_Render/simple_text
=== RUN   TestTemplateEngine_Render/uuid_function
=== RUN   TestTemplateEngine_Render/timestamp_function
=== RUN   TestTemplateEngine_Render/request_path
=== RUN   TestTemplateEngine_Render/request_method
=== RUN   TestTemplateEngine_Render/random_function
=== RUN   TestTemplateEngine_Render/randomString_function
=== RUN   TestTemplateEngine_Render/base64_encoding
=== RUN   TestTemplateEngine_Render/conditional_rendering
=== RUN   TestTemplateEngine_Render/concat_function
--- PASS: TestTemplateEngine_Render (0.00s)
    --- PASS: TestTemplateEngine_Render/simple_text (0.00s)
    --- PASS: TestTemplateEngine_Render/uuid_function (0.00s)
    --- PASS: TestTemplateEngine_Render/timestamp_function (0.00s)
    --- PASS: TestTemplateEngine_Render/request_path (0.00s)
    --- PASS: TestTemplateEngine_Render/request_method (0.00s)
    --- PASS: TestTemplateEngine_Render/random_function (0.00s)
    --- PASS: TestTemplateEngine_Render/randomString_function (0.00s)
    --- PASS: TestTemplateEngine_Render/base64_encoding (0.00s)
    --- PASS: TestTemplateEngine_Render/conditional_rendering (0.00s)
    --- PASS: TestTemplateEngine_Render/concat_function (0.00s)
=== RUN   TestTemplateEngine_RenderJSON
=== RUN   TestTemplateEngine_RenderJSON/simple_json_object
=== RUN   TestTemplateEngine_RenderJSON/with_uuid_and_timestamp
--- PASS: TestTemplateEngine_RenderJSON (0.00s)
    --- PASS: TestTemplateEngine_RenderJSON/simple_json_object (0.00s)
    --- PASS: TestTemplateEngine_RenderJSON/with_uuid_and_timestamp (0.00s)
=== RUN   TestMockExecutor_DynamicResponse
=== RUN   TestMockExecutor_DynamicResponse/dynamic_json_response
=== RUN   TestMockExecutor_DynamicResponse/dynamic_text_response
--- PASS: TestMockExecutor_DynamicResponse (0.00s)
    --- PASS: TestMockExecutor_DynamicResponse/dynamic_json_response (0.00s)
    --- PASS: TestMockExecutor_DynamicResponse/dynamic_text_response (0.00s)
=== RUN   TestTemplateEngine_BuildContext
--- PASS: TestTemplateEngine_BuildContext (0.00s)
=== RUN   TestTemplateEngine_BuiltInFunctions
=== RUN   TestTemplateEngine_BuiltInFunctions/timestamp
=== RUN   TestTemplateEngine_BuiltInFunctions/uuid
=== RUN   TestTemplateEngine_BuiltInFunctions/now_with_format
=== RUN   TestTemplateEngine_BuiltInFunctions/random_range
=== RUN   TestTemplateEngine_BuiltInFunctions/randomString_length
--- PASS: TestTemplateEngine_BuiltInFunctions (0.00s)
    --- PASS: TestTemplateEngine_BuiltInFunctions/timestamp (0.00s)
    --- PASS: TestTemplateEngine_BuiltInFunctions/uuid (0.00s)
    --- PASS: TestTemplateEngine_BuiltInFunctions/now_with_format (0.00s)
    --- PASS: TestTemplateEngine_BuiltInFunctions/random_range (0.00s)
    --- PASS: TestTemplateEngine_BuiltInFunctions/randomString_length (0.00s)
PASS
coverage: 35.2% of statements
ok  	github.com/gomockserver/mockserver/internal/executor	2.555s	coverage: 35.2% of statements
	github.com/gomockserver/mockserver/internal/metrics		coverage: 0.0% of statements
	github.com/gomockserver/mockserver/internal/middleware		coverage: 0.0% of statements
	github.com/gomockserver/mockserver/internal/models		coverage: 0.0% of statements
=== RUN   TestMetrics
--- PASS: TestMetrics (0.00s)
PASS
coverage: 100.0% of statements
ok  	github.com/gomockserver/mockserver/internal/monitoring	3.313s	coverage: 100.0% of statements
=== RUN   TestObjectIDConversion
=== RUN   TestObjectIDConversion/有效的ObjectID
=== RUN   TestObjectIDConversion/无效的ObjectID
=== RUN   TestObjectIDConversion/空ID
=== RUN   TestObjectIDConversion/长度不够的ID
--- PASS: TestObjectIDConversion (0.00s)
    --- PASS: TestObjectIDConversion/有效的ObjectID (0.00s)
    --- PASS: TestObjectIDConversion/无效的ObjectID (0.00s)
    --- PASS: TestObjectIDConversion/空ID (0.00s)
    --- PASS: TestObjectIDConversion/长度不够的ID (0.00s)
=== RUN   TestRuleModel
--- PASS: TestRuleModel (0.00s)
=== RUN   TestProjectModel
--- PASS: TestProjectModel (0.00s)
=== RUN   TestEnvironmentModel
--- PASS: TestEnvironmentModel (0.00s)
=== RUN   TestRuleTimeStamps
--- PASS: TestRuleTimeStamps (0.01s)
=== RUN   TestFilterConstruction
=== RUN   TestFilterConstruction/项目和环境过滤
=== RUN   TestFilterConstruction/启用状态过滤
=== RUN   TestFilterConstruction/空过滤条件
--- PASS: TestFilterConstruction (0.00s)
    --- PASS: TestFilterConstruction/项目和环境过滤 (0.00s)
    --- PASS: TestFilterConstruction/启用状态过滤 (0.00s)
    --- PASS: TestFilterConstruction/空过滤条件 (0.00s)
=== RUN   TestPaginationParameters
=== RUN   TestPaginationParameters/第一页
=== RUN   TestPaginationParameters/第二页
=== RUN   TestPaginationParameters/第三页，较小pageSize
=== RUN   TestPaginationParameters/大页码
--- PASS: TestPaginationParameters (0.00s)
    --- PASS: TestPaginationParameters/第一页 (0.00s)
    --- PASS: TestPaginationParameters/第二页 (0.00s)
    --- PASS: TestPaginationParameters/第三页，较小pageSize (0.00s)
    --- PASS: TestPaginationParameters/大页码 (0.00s)
=== RUN   TestRuleValidation
=== RUN   TestRuleValidation/有效规则
=== RUN   TestRuleValidation/缺少名称
=== RUN   TestRuleValidation/缺少项目ID
=== RUN   TestRuleValidation/缺少环境ID
--- PASS: TestRuleValidation (0.00s)
    --- PASS: TestRuleValidation/有效规则 (0.00s)
    --- PASS: TestRuleValidation/缺少名称 (0.00s)
    --- PASS: TestRuleValidation/缺少项目ID (0.00s)
    --- PASS: TestRuleValidation/缺少环境ID (0.00s)
=== RUN   TestProjectValidation
=== RUN   TestProjectValidation/有效项目
=== RUN   TestProjectValidation/缺少名称
=== RUN   TestProjectValidation/缺少工作空间ID
--- PASS: TestProjectValidation (0.00s)
    --- PASS: TestProjectValidation/有效项目 (0.00s)
    --- PASS: TestProjectValidation/缺少名称 (0.00s)
    --- PASS: TestProjectValidation/缺少工作空间ID (0.00s)
=== RUN   TestEnvironmentValidation
=== RUN   TestEnvironmentValidation/有效环境
=== RUN   TestEnvironmentValidation/缺少名称
=== RUN   TestEnvironmentValidation/缺少项目ID
--- PASS: TestEnvironmentValidation (0.00s)
    --- PASS: TestEnvironmentValidation/有效环境 (0.00s)
    --- PASS: TestEnvironmentValidation/缺少名称 (0.00s)
    --- PASS: TestEnvironmentValidation/缺少项目ID (0.00s)
=== RUN   TestContextHandling
--- PASS: TestContextHandling (0.00s)
=== RUN   TestProtocolTypes
=== RUN   TestProtocolTypes/HTTP协议
=== RUN   TestProtocolTypes/WebSocket协议
=== RUN   TestProtocolTypes/gRPC协议
=== RUN   TestProtocolTypes/TCP协议
=== RUN   TestProtocolTypes/UDP协议
--- PASS: TestProtocolTypes (0.00s)
    --- PASS: TestProtocolTypes/HTTP协议 (0.00s)
    --- PASS: TestProtocolTypes/WebSocket协议 (0.00s)
    --- PASS: TestProtocolTypes/gRPC协议 (0.00s)
    --- PASS: TestProtocolTypes/TCP协议 (0.00s)
    --- PASS: TestProtocolTypes/UDP协议 (0.00s)
=== RUN   TestMatchTypes
=== RUN   TestMatchTypes/简单匹配
=== RUN   TestMatchTypes/正则匹配
=== RUN   TestMatchTypes/脚本匹配
--- PASS: TestMatchTypes (0.00s)
    --- PASS: TestMatchTypes/简单匹配 (0.00s)
    --- PASS: TestMatchTypes/正则匹配 (0.00s)
    --- PASS: TestMatchTypes/脚本匹配 (0.00s)
=== RUN   TestResponseTypes
=== RUN   TestResponseTypes/静态响应
=== RUN   TestResponseTypes/动态响应
=== RUN   TestResponseTypes/代理响应
=== RUN   TestResponseTypes/脚本响应
--- PASS: TestResponseTypes (0.00s)
    --- PASS: TestResponseTypes/静态响应 (0.00s)
    --- PASS: TestResponseTypes/动态响应 (0.00s)
    --- PASS: TestResponseTypes/代理响应 (0.00s)
    --- PASS: TestResponseTypes/脚本响应 (0.00s)
=== RUN   TestContentTypes
=== RUN   TestContentTypes/JSON
=== RUN   TestContentTypes/XML
=== RUN   TestContentTypes/HTML
=== RUN   TestContentTypes/文本
=== RUN   TestContentTypes/二进制
--- PASS: TestContentTypes (0.00s)
    --- PASS: TestContentTypes/JSON (0.00s)
    --- PASS: TestContentTypes/XML (0.00s)
    --- PASS: TestContentTypes/HTML (0.00s)
    --- PASS: TestContentTypes/文本 (0.00s)
    --- PASS: TestContentTypes/二进制 (0.00s)
=== RUN   TestDelayConfig
=== RUN   TestDelayConfig/固定延迟
=== RUN   TestDelayConfig/随机延迟
=== RUN   TestDelayConfig/正态分布延迟
--- PASS: TestDelayConfig (0.00s)
    --- PASS: TestDelayConfig/固定延迟 (0.00s)
    --- PASS: TestDelayConfig/随机延迟 (0.00s)
    --- PASS: TestDelayConfig/正态分布延迟 (0.00s)
=== RUN   TestRuleResponse
--- PASS: TestRuleResponse (0.00s)
=== RUN   TestBSONTagsPresence
--- PASS: TestBSONTagsPresence (0.00s)
=== RUN   TestRequestLogRepository_Create
--- PASS: TestRequestLogRepository_Create (0.04s)
=== RUN   TestRequestLogRepository_FindByID
--- PASS: TestRequestLogRepository_FindByID (0.02s)
=== RUN   TestRequestLogRepository_List
=== RUN   TestRequestLogRepository_List/List_all_logs
=== RUN   TestRequestLogRepository_List/Filter_by_project
=== RUN   TestRequestLogRepository_List/Filter_by_protocol
=== RUN   TestRequestLogRepository_List/Filter_by_method
=== RUN   TestRequestLogRepository_List/Pagination
--- PASS: TestRequestLogRepository_List (0.04s)
    --- PASS: TestRequestLogRepository_List/List_all_logs (0.00s)
    --- PASS: TestRequestLogRepository_List/Filter_by_project (0.00s)
    --- PASS: TestRequestLogRepository_List/Filter_by_protocol (0.00s)
    --- PASS: TestRequestLogRepository_List/Filter_by_method (0.00s)
    --- PASS: TestRequestLogRepository_List/Pagination (0.00s)
=== RUN   TestRequestLogRepository_DeleteBefore
--- PASS: TestRequestLogRepository_DeleteBefore (0.02s)
=== RUN   TestRequestLogRepository_GetStatistics
--- PASS: TestRequestLogRepository_GetStatistics (0.02s)
PASS
coverage: 26.5% of statements
ok  	github.com/gomockserver/mockserver/internal/repository	3.150s	coverage: 26.5% of statements
=== RUN   TestNewAdminService
--- PASS: TestNewAdminService (0.00s)
=== RUN   TestCORSMiddleware
=== RUN   TestCORSMiddleware/OPTIONS_请求返回_204
=== RUN   TestCORSMiddleware/GET_请求正常处理
=== RUN   TestCORSMiddleware/POST_请求正常处理
--- PASS: TestCORSMiddleware (0.00s)
    --- PASS: TestCORSMiddleware/OPTIONS_请求返回_204 (0.00s)
    --- PASS: TestCORSMiddleware/GET_请求正常处理 (0.00s)
    --- PASS: TestCORSMiddleware/POST_请求正常处理 (0.00s)
=== RUN   TestHealthCheck
--- PASS: TestHealthCheck (0.00s)
=== RUN   TestGetVersion
--- PASS: TestGetVersion (0.00s)
=== RUN   TestAdminServiceRoutes
=== RUN   TestAdminServiceRoutes/健康检查路由
=== RUN   TestAdminServiceRoutes/版本信息路由
--- PASS: TestAdminServiceRoutes (0.00s)
    --- PASS: TestAdminServiceRoutes/健康检查路由 (0.00s)
    --- PASS: TestAdminServiceRoutes/版本信息路由 (0.00s)
=== RUN   TestCORSMiddleware_OptionsRequest
--- PASS: TestCORSMiddleware_OptionsRequest (0.00s)
=== RUN   TestCORSMiddleware_Headers
--- PASS: TestCORSMiddleware_Headers (0.00s)
=== RUN   TestBatchEnable
=== RUN   TestBatchEnable/Success
=== RUN   TestBatchEnable/Partial_Success
=== RUN   TestBatchEnable/Rule_Not_Found
--- PASS: TestBatchEnable (0.00s)
    --- PASS: TestBatchEnable/Success (0.00s)
    --- PASS: TestBatchEnable/Partial_Success (0.00s)
    --- PASS: TestBatchEnable/Rule_Not_Found (0.00s)
=== RUN   TestBatchDisable
=== RUN   TestBatchDisable/Success
--- PASS: TestBatchDisable (0.00s)
    --- PASS: TestBatchDisable/Success (0.00s)
=== RUN   TestBatchDelete
=== RUN   TestBatchDelete/Success
=== RUN   TestBatchDelete/Partial_Failure
--- PASS: TestBatchDelete (0.00s)
    --- PASS: TestBatchDelete/Success (0.00s)
    --- PASS: TestBatchDelete/Partial_Failure (0.00s)
=== RUN   TestBatchUpdate
=== RUN   TestBatchUpdate/Update_Priority_-_Success
=== RUN   TestBatchUpdate/Update_Priority_-_Float64
=== RUN   TestBatchUpdate/Update_Tags_-_Success
=== RUN   TestBatchUpdate/Update_Tags_-_Interface_Array
=== RUN   TestBatchUpdate/Update_Enabled_-_Success
=== RUN   TestBatchUpdate/Invalid_Field
=== RUN   TestBatchUpdate/Multiple_Fields_Update
--- PASS: TestBatchUpdate (0.00s)
    --- PASS: TestBatchUpdate/Update_Priority_-_Success (0.00s)
    --- PASS: TestBatchUpdate/Update_Priority_-_Float64 (0.00s)
    --- PASS: TestBatchUpdate/Update_Tags_-_Success (0.00s)
    --- PASS: TestBatchUpdate/Update_Tags_-_Interface_Array (0.00s)
    --- PASS: TestBatchUpdate/Update_Enabled_-_Success (0.00s)
    --- PASS: TestBatchUpdate/Invalid_Field (0.00s)
    --- PASS: TestBatchUpdate/Multiple_Fields_Update (0.00s)
=== RUN   TestExecuteBatchOperation
=== RUN   TestExecuteBatchOperation/Empty_RuleIDs
=== RUN   TestExecuteBatchOperation/Enable_Operation
=== RUN   TestExecuteBatchOperation/Disable_Operation
=== RUN   TestExecuteBatchOperation/Delete_Operation
=== RUN   TestExecuteBatchOperation/Update_Operation
=== RUN   TestExecuteBatchOperation/Update_Without_Updates
=== RUN   TestExecuteBatchOperation/Unknown_Operation
--- PASS: TestExecuteBatchOperation (0.00s)
    --- PASS: TestExecuteBatchOperation/Empty_RuleIDs (0.00s)
    --- PASS: TestExecuteBatchOperation/Enable_Operation (0.00s)
    --- PASS: TestExecuteBatchOperation/Disable_Operation (0.00s)
    --- PASS: TestExecuteBatchOperation/Delete_Operation (0.00s)
    --- PASS: TestExecuteBatchOperation/Update_Operation (0.00s)
    --- PASS: TestExecuteBatchOperation/Update_Without_Updates (0.00s)
    --- PASS: TestExecuteBatchOperation/Unknown_Operation (0.00s)
=== RUN   TestHandleError
--- PASS: TestHandleError (0.00s)
=== RUN   TestNewBatchOperationService
--- PASS: TestNewBatchOperationService (0.00s)
=== RUN   TestExportRules
=== RUN   TestExportRules/Export_by_RuleIDs
=== RUN   TestExportRules/Export_by_Environment
=== RUN   TestExportRules/Export_with_Project_Info
=== RUN   TestExportRules/Export_with_Environments
=== RUN   TestExportRules/Export_with_Metadata
--- PASS: TestExportRules (0.00s)
    --- PASS: TestExportRules/Export_by_RuleIDs (0.00s)
    --- PASS: TestExportRules/Export_by_Environment (0.00s)
    --- PASS: TestExportRules/Export_with_Project_Info (0.00s)
    --- PASS: TestExportRules/Export_with_Environments (0.00s)
    --- PASS: TestExportRules/Export_with_Metadata (0.00s)
=== RUN   TestExportProject
--- PASS: TestExportProject (0.00s)
=== RUN   TestValidateImportData
=== RUN   TestValidateImportData/Valid_Data
=== RUN   TestValidateImportData/Unsupported_Version
=== RUN   TestValidateImportData/Invalid_Export_Type
=== RUN   TestValidateImportData/No_Rules
=== RUN   TestValidateImportData/Missing_Name
=== RUN   TestValidateImportData/Missing_Protocol
--- PASS: TestValidateImportData (0.00s)
    --- PASS: TestValidateImportData/Valid_Data (0.00s)
    --- PASS: TestValidateImportData/Unsupported_Version (0.00s)
    --- PASS: TestValidateImportData/Invalid_Export_Type (0.00s)
    --- PASS: TestValidateImportData/No_Rules (0.00s)
    --- PASS: TestValidateImportData/Missing_Name (0.00s)
    --- PASS: TestValidateImportData/Missing_Protocol (0.00s)
=== RUN   TestImportData
=== RUN   TestImportData/Create_New_Project_and_Rules
=== RUN   TestImportData/Import_to_Existing_Project_-_Skip_Strategy
=== RUN   TestImportData/Import_to_Existing_Project_-_Overwrite_Strategy
=== RUN   TestImportData/Import_with_Validation_Error
=== RUN   TestImportData/Missing_Target_Project
--- PASS: TestImportData (0.00s)
    --- PASS: TestImportData/Create_New_Project_and_Rules (0.00s)
    --- PASS: TestImportData/Import_to_Existing_Project_-_Skip_Strategy (0.00s)
    --- PASS: TestImportData/Import_to_Existing_Project_-_Overwrite_Strategy (0.00s)
    --- PASS: TestImportData/Import_with_Validation_Error (0.00s)
    --- PASS: TestImportData/Missing_Target_Project (0.00s)
=== RUN   TestCloneRule
=== RUN   TestCloneRule/Clone_with_Auto_Name
=== RUN   TestCloneRule/Clone_with_Custom_Name
=== RUN   TestCloneRule/Clone_with_New_Priority
=== RUN   TestCloneRule/Clone_to_Different_Project
=== RUN   TestCloneRule/Source_Rule_Not_Found
--- PASS: TestCloneRule (0.00s)
    --- PASS: TestCloneRule/Clone_with_Auto_Name (0.00s)
    --- PASS: TestCloneRule/Clone_with_Custom_Name (0.00s)
    --- PASS: TestCloneRule/Clone_with_New_Priority (0.00s)
    --- PASS: TestCloneRule/Clone_to_Different_Project (0.00s)
    --- PASS: TestCloneRule/Source_Rule_Not_Found (0.00s)
=== RUN   TestGenerateCopyName
=== RUN   TestGenerateCopyName/Name_Without_Copy_Suffix
=== RUN   TestGenerateCopyName/Name_With_Copy_Suffix
--- PASS: TestGenerateCopyName (0.00s)
    --- PASS: TestGenerateCopyName/Name_Without_Copy_Suffix (0.00s)
    --- PASS: TestGenerateCopyName/Name_With_Copy_Suffix (0.00s)
=== RUN   TestGenerateUniqueName
=== RUN   TestGenerateUniqueName/Generate_Unique_Name
--- PASS: TestGenerateUniqueName (0.00s)
    --- PASS: TestGenerateUniqueName/Generate_Unique_Name (0.00s)
=== RUN   TestNewImportExportService
--- PASS: TestNewImportExportService (0.00s)
=== RUN   TestNewCloneRuleService
--- PASS: TestNewCloneRuleService (0.00s)
=== RUN   TestNewMockService
--- PASS: TestNewMockService (0.00s)
=== RUN   TestMockService_HandleMockRequest_MissingParams
=== RUN   TestMockService_HandleMockRequest_MissingParams/缺少_projectID
=== RUN   TestMockService_HandleMockRequest_MissingParams/缺少_environmentID
--- PASS: TestMockService_HandleMockRequest_MissingParams (0.00s)
    --- PASS: TestMockService_HandleMockRequest_MissingParams/缺少_projectID (0.00s)
    --- PASS: TestMockService_HandleMockRequest_MissingParams/缺少_environmentID (0.00s)
=== RUN   TestMockService_HandleMockRequest_MatchRuleError
{"level":"error","ts":1763376015.013759,"caller":"logger/logger.go:99","msg":"failed to match rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/service.(*MockService).HandleMockRequest\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/service/mock_service.go:68\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/service.TestMockService_HandleMockRequest_MatchRuleError\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/service/mock_service_test.go:119\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestMockService_HandleMockRequest_MatchRuleError (0.00s)
=== RUN   TestMockService_HandleMockRequest_NoRuleMatched
{"level":"info","ts":1763376015.013887,"caller":"logger/logger.go:89","msg":"no rule matched, using default response","path":"/api/test","project_id":"project-001","environment_id":"env-001"}
--- PASS: TestMockService_HandleMockRequest_NoRuleMatched (0.00s)
=== RUN   TestMockService_HandleMockRequest_ExecuteError
{"level":"error","ts":1763376015.0139892,"caller":"logger/logger.go:99","msg":"failed to execute mock","error":"execution error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/service.(*MockService).HandleMockRequest\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/service/mock_service.go:88\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/service.TestMockService_HandleMockRequest_ExecuteError\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/service/mock_service_test.go:187\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestMockService_HandleMockRequest_ExecuteError (0.00s)
=== RUN   TestMockService_HandleMockRequest_Success
--- PASS: TestMockService_HandleMockRequest_Success (0.00s)
=== RUN   TestMockService_HandleMockRequest_WithBody
--- PASS: TestMockService_HandleMockRequest_WithBody (0.00s)
=== RUN   TestMockService_HandleMockRequest_WithHeaders
--- PASS: TestMockService_HandleMockRequest_WithHeaders (0.00s)
=== RUN   TestMockService_HandleMockRequest_DifferentMethods
=== RUN   TestMockService_HandleMockRequest_DifferentMethods/GET
=== RUN   TestMockService_HandleMockRequest_DifferentMethods/POST
=== RUN   TestMockService_HandleMockRequest_DifferentMethods/PUT
=== RUN   TestMockService_HandleMockRequest_DifferentMethods/DELETE
=== RUN   TestMockService_HandleMockRequest_DifferentMethods/PATCH
--- PASS: TestMockService_HandleMockRequest_DifferentMethods (0.00s)
    --- PASS: TestMockService_HandleMockRequest_DifferentMethods/GET (0.00s)
    --- PASS: TestMockService_HandleMockRequest_DifferentMethods/POST (0.00s)
    --- PASS: TestMockService_HandleMockRequest_DifferentMethods/PUT (0.00s)
    --- PASS: TestMockService_HandleMockRequest_DifferentMethods/DELETE (0.00s)
    --- PASS: TestMockService_HandleMockRequest_DifferentMethods/PATCH (0.00s)
PASS
coverage: 49.7% of statements
ok  	github.com/gomockserver/mockserver/internal/service	3.023s	coverage: 49.7% of statements
