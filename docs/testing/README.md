# MockServer 测试文档

本目录包含 MockServer 项目的核心测试报告和总结文档。

## 📁 目录结构

```
docs/testing/
├── README.md                           # 本文件
├── E2E_TEST_REPORT.md                   # 完整 E2E 测试报告
└── TEST_EXECUTION_SUMMARY.md           # 测试执行总结
```

## 📊 最新测试结果

### 最近一次测试 (2025-11-18)
- **测试版本**: v0.6.2
- **执行时间**: 220秒
- **总体通过率**: 94% (48/51 测试通过)
- **核心功能**: 100% 通过
- **性能表现**: 峰值 QPS 3,366

**📋 完整报告**: [E2E_TEST_REPORT.md](./E2E_TEST_REPORT.md)
**⚡ 执行总结**: [TEST_EXECUTION_SUMMARY.md](./TEST_EXECUTION_SUMMARY.md)

## 🧪 测试类型

### 1. 基础功能测试 ✅
- **目标**: 验证核心 CRUD 功能
- **覆盖**: 项目、环境、规则管理
- **状态**: 100% 通过 (31/31)

### 2. 高级功能测试 ⚠️
- **目标**: 验证复杂匹配和动态响应
- **覆盖**: 正则表达式、模板、代理等
- **状态**: 57% 通过 (8/14)，存在 400 错误

### 3. WebSocket测试 ❌
- **目标**: 验证 WebSocket 协议支持
- **覆盖**: 连接、消息、心跳等
- **状态**: 脚本语法错误需修复

### 4. 边界条件测试 ⚠️
- **目标**: 验证异常场景处理
- **覆盖**: 超长路径、大请求体等
- **状态**: 66% 通过 (4/6)

### 5. 压力测试 ✅
- **目标**: 验证性能和稳定性
- **覆盖**: 多级负载、并发连接
- **状态**: 89% 通过 (17/19)

## 🚀 性能基准

### 吞吐量表现
| 负载级别 | 并发数 | 平均 QPS | 评级 |
|----------|--------|----------|------|
| 轻量级 | 10 | 2,295 | 🟢 优秀 |
| 中等负载 | 50 | 3,228 | 🟢 优秀 |
| 高负载 | 100 | 3,297 | 🟢 优秀 |
| 极高负载 | 200 | 3,366 | 🟢 优秀 |

### 关键指标
- **峰值 QPS**: 3,366
- **最大并发**: 200+
- **总处理请求**: 388,839+
- **测试稳定性**: 所有负载级别均稳定运行

## 🛠️ 如何运行测试

### 快速开始
```bash
# 运行完整测试套件
./tests/integration/run_all_e2e_tests.sh

# 运行单个测试
./tests/integration/e2e_test.sh              # 基础功能
./tests/integration/advanced_e2e_test.sh      # 高级功能
./tests/integration/websocket_e2e_test.sh     # WebSocket
./tests/integration/edge_case_e2e_test.sh     # 边界条件
./tests/integration/stress_e2e_test.sh        # 压力测试
```

### 工具安装
```bash
# 安装所有测试工具
./tests/integration/install_tools.sh --all

# 检查工具状态
./tests/integration/install_tools.sh --check
```

## 🔍 问题跟踪

### 已知问题
1. **高级功能 400 错误** - 请求格式验证需要完善
2. **WebSocket 脚本错误** - 第143行语法问题
3. **边界条件处理** - 异常输入处理不足

### 修复优先级
- 🔴 **高优先级**: WebSocket 脚本语法错误
- 🟡 **中优先级**: 高级功能请求验证
- 🟢 **低优先级**: 边界条件增强

## 📈 测试覆盖

### 功能覆盖
- [x] 项目管理 (CRUD)
- [x] 环境管理 (CRUD)
- [x] 规则管理 (CRUD)
- [x] Mock 服务 (HTTP)
- [x] 性能测试 (负载)
- [x] 工具自动安装
- [ ] WebSocket 支持
- [ ] 高级规则匹配

### 平台覆盖
- [x] macOS (Darwin)
- [x] Linux (Ubuntu/CentOS)
- [ ] Windows (计划中)

## 💡 部署建议

### ✅ 推荐部署场景
- HTTP API Mock 服务
- 开发和测试环境
- API 原型和验证
- 中等负载生产环境 (3000+ QPS)

### 🎯 性能基准
- **预期 QPS**: 2,000 - 3,500
- **并发连接**: 100 - 200
- **响应时间**: P95 < 100ms

---

**最后更新**: 2025-11-18
**维护团队**: MockServer 开发团队
**文档版本**: v1.0