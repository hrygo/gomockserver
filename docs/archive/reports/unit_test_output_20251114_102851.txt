=== RUN   TestNewHTTPAdapter
--- PASS: TestNewHTTPAdapter (0.00s)
=== RUN   TestHTTPAdapter_Parse
=== RUN   TestHTTPAdapter_Parse/GET请求解析
=== RUN   TestHTTPAdapter_Parse/POST请求解析
=== RUN   TestHTTPAdapter_Parse/带Query参数的GET请求
=== RUN   TestHTTPAdapter_Parse/带多个Header的请求
--- PASS: TestHTTPAdapter_Parse (0.00s)
    --- PASS: TestHTTPAdapter_Parse/GET请求解析 (0.00s)
    --- PASS: TestHTTPAdapter_Parse/POST请求解析 (0.00s)
    --- PASS: TestHTTPAdapter_Parse/带Query参数的GET请求 (0.00s)
    --- PASS: TestHTTPAdapter_Parse/带多个Header的请求 (0.00s)
=== RUN   TestHTTPAdapter_Parse_EmptyBody
--- PASS: TestHTTPAdapter_Parse_EmptyBody (0.00s)
=== RUN   TestHTTPAdapter_Parse_InvalidInput
--- PASS: TestHTTPAdapter_Parse_InvalidInput (0.00s)
=== RUN   TestHTTPAdapter_Build
--- PASS: TestHTTPAdapter_Build (0.00s)
=== RUN   TestHTTPAdapter_WriteResponse
=== RUN   TestHTTPAdapter_WriteResponse/200_JSON响应
=== RUN   TestHTTPAdapter_WriteResponse/404错误响应
=== RUN   TestHTTPAdapter_WriteResponse/自定义Header响应
--- PASS: TestHTTPAdapter_WriteResponse (0.00s)
    --- PASS: TestHTTPAdapter_WriteResponse/200_JSON响应 (0.00s)
    --- PASS: TestHTTPAdapter_WriteResponse/404错误响应 (0.00s)
    --- PASS: TestHTTPAdapter_WriteResponse/自定义Header响应 (0.00s)
=== RUN   TestGetContentType
=== RUN   TestGetContentType/标准Content-Type
=== RUN   TestGetContentType/小写content-type
=== RUN   TestGetContentType/混合大小写
=== RUN   TestGetContentType/没有Content-Type
=== RUN   TestGetContentType/有其他Header但没有Content-Type
--- PASS: TestGetContentType (0.00s)
    --- PASS: TestGetContentType/标准Content-Type (0.00s)
    --- PASS: TestGetContentType/小写content-type (0.00s)
    --- PASS: TestGetContentType/混合大小写 (0.00s)
    --- PASS: TestGetContentType/没有Content-Type (0.00s)
    --- PASS: TestGetContentType/有其他Header但没有Content-Type (0.00s)
=== RUN   TestHTTPAdapter_Parse_ClientIP
--- PASS: TestHTTPAdapter_Parse_ClientIP (0.00s)
=== RUN   TestHTTPAdapter_Parse_Metadata
--- PASS: TestHTTPAdapter_Parse_Metadata (0.00s)
PASS
coverage: 96.3% of statements
ok  	github.com/gomockserver/mockserver/internal/adapter	(cached)	coverage: 96.3% of statements
=== RUN   TestProjectHandler_CreateProject
=== RUN   TestProjectHandler_CreateProject/成功创建项目
=== RUN   TestProjectHandler_CreateProject/无效的JSON
=== RUN   TestProjectHandler_CreateProject/数据库错误
{"level":"error","ts":1763086556.579777,"caller":"logger/logger.go:99","msg":"failed to create project","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).CreateProject\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:36\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_CreateProject.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:155\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_CreateProject (0.00s)
    --- PASS: TestProjectHandler_CreateProject/成功创建项目 (0.00s)
    --- PASS: TestProjectHandler_CreateProject/无效的JSON (0.00s)
    --- PASS: TestProjectHandler_CreateProject/数据库错误 (0.00s)
=== RUN   TestProjectHandler_GetProject
=== RUN   TestProjectHandler_GetProject/成功获取项目
=== RUN   TestProjectHandler_GetProject/项目不存在
=== RUN   TestProjectHandler_GetProject/数据库错误
{"level":"error","ts":1763086556.580363,"caller":"logger/logger.go:99","msg":"failed to get project","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).GetProject\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:50\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_GetProject.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:213\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_GetProject (0.00s)
    --- PASS: TestProjectHandler_GetProject/成功获取项目 (0.00s)
    --- PASS: TestProjectHandler_GetProject/项目不存在 (0.00s)
    --- PASS: TestProjectHandler_GetProject/数据库错误 (0.00s)
=== RUN   TestProjectHandler_UpdateProject
=== RUN   TestProjectHandler_UpdateProject/成功更新项目
=== RUN   TestProjectHandler_UpdateProject/无效的JSON
=== RUN   TestProjectHandler_UpdateProject/数据库错误
{"level":"error","ts":1763086556.580692,"caller":"logger/logger.go:99","msg":"failed to update project","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).UpdateProject\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:76\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_UpdateProject.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:282\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_UpdateProject (0.00s)
    --- PASS: TestProjectHandler_UpdateProject/成功更新项目 (0.00s)
    --- PASS: TestProjectHandler_UpdateProject/无效的JSON (0.00s)
    --- PASS: TestProjectHandler_UpdateProject/数据库错误 (0.00s)
=== RUN   TestProjectHandler_DeleteProject
=== RUN   TestProjectHandler_DeleteProject/成功删除项目
=== RUN   TestProjectHandler_DeleteProject/数据库错误
{"level":"error","ts":1763086556.5808861,"caller":"logger/logger.go:99","msg":"failed to delete project","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).DeleteProject\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:89\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_DeleteProject.func3\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:329\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_DeleteProject (0.00s)
    --- PASS: TestProjectHandler_DeleteProject/成功删除项目 (0.00s)
    --- PASS: TestProjectHandler_DeleteProject/数据库错误 (0.00s)
=== RUN   TestProjectHandler_CreateEnvironment
=== RUN   TestProjectHandler_CreateEnvironment/成功创建环境
=== RUN   TestProjectHandler_CreateEnvironment/无效的JSON
=== RUN   TestProjectHandler_CreateEnvironment/数据库错误
{"level":"error","ts":1763086556.581195,"caller":"logger/logger.go:99","msg":"failed to create environment","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).CreateEnvironment\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:106\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_CreateEnvironment.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:395\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_CreateEnvironment (0.00s)
    --- PASS: TestProjectHandler_CreateEnvironment/成功创建环境 (0.00s)
    --- PASS: TestProjectHandler_CreateEnvironment/无效的JSON (0.00s)
    --- PASS: TestProjectHandler_CreateEnvironment/数据库错误 (0.00s)
=== RUN   TestProjectHandler_GetEnvironment
=== RUN   TestProjectHandler_GetEnvironment/成功获取环境
=== RUN   TestProjectHandler_GetEnvironment/环境不存在
=== RUN   TestProjectHandler_GetEnvironment/数据库错误
{"level":"error","ts":1763086556.5814312,"caller":"logger/logger.go:99","msg":"failed to get environment","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).GetEnvironment\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:120\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_GetEnvironment.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:453\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_GetEnvironment (0.00s)
    --- PASS: TestProjectHandler_GetEnvironment/成功获取环境 (0.00s)
    --- PASS: TestProjectHandler_GetEnvironment/环境不存在 (0.00s)
    --- PASS: TestProjectHandler_GetEnvironment/数据库错误 (0.00s)
=== RUN   TestProjectHandler_ListEnvironments
=== RUN   TestProjectHandler_ListEnvironments/成功列出环境
=== RUN   TestProjectHandler_ListEnvironments/缺少project_id参数
=== RUN   TestProjectHandler_ListEnvironments/数据库错误
{"level":"error","ts":1763086556.58164,"caller":"logger/logger.go:99","msg":"failed to list environments","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).ListEnvironments\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:143\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_ListEnvironments.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:510\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_ListEnvironments (0.00s)
    --- PASS: TestProjectHandler_ListEnvironments/成功列出环境 (0.00s)
    --- PASS: TestProjectHandler_ListEnvironments/缺少project_id参数 (0.00s)
    --- PASS: TestProjectHandler_ListEnvironments/数据库错误 (0.00s)
=== RUN   TestProjectHandler_UpdateEnvironment
=== RUN   TestProjectHandler_UpdateEnvironment/成功更新环境
=== RUN   TestProjectHandler_UpdateEnvironment/无效的JSON
=== RUN   TestProjectHandler_UpdateEnvironment/数据库错误
{"level":"error","ts":1763086556.5819001,"caller":"logger/logger.go:99","msg":"failed to update environment","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).UpdateEnvironment\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:166\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_UpdateEnvironment.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:579\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_UpdateEnvironment (0.00s)
    --- PASS: TestProjectHandler_UpdateEnvironment/成功更新环境 (0.00s)
    --- PASS: TestProjectHandler_UpdateEnvironment/无效的JSON (0.00s)
    --- PASS: TestProjectHandler_UpdateEnvironment/数据库错误 (0.00s)
=== RUN   TestProjectHandler_DeleteEnvironment
=== RUN   TestProjectHandler_DeleteEnvironment/成功删除环境
=== RUN   TestProjectHandler_DeleteEnvironment/数据库错误
{"level":"error","ts":1763086556.582138,"caller":"logger/logger.go:99","msg":"failed to delete environment","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*ProjectHandler).DeleteEnvironment\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler.go:179\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestProjectHandler_DeleteEnvironment.func3\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/project_handler_test.go:626\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestProjectHandler_DeleteEnvironment (0.00s)
    --- PASS: TestProjectHandler_DeleteEnvironment/成功删除环境 (0.00s)
    --- PASS: TestProjectHandler_DeleteEnvironment/数据库错误 (0.00s)
=== RUN   TestRuleHandler_CreateRule
=== RUN   TestRuleHandler_CreateRule/成功创建规则
=== RUN   TestRuleHandler_CreateRule/无效的JSON
=== RUN   TestRuleHandler_CreateRule/缺少必填字段_-_Name
=== RUN   TestRuleHandler_CreateRule/缺少必填字段_-_ProjectID
=== RUN   TestRuleHandler_CreateRule/数据库错误
{"level":"error","ts":1763086556.5826828,"caller":"logger/logger.go:99","msg":"failed to create rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).CreateRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_CreateRule.func6\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:167\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_CreateRule (0.00s)
    --- PASS: TestRuleHandler_CreateRule/成功创建规则 (0.00s)
    --- PASS: TestRuleHandler_CreateRule/无效的JSON (0.00s)
    --- PASS: TestRuleHandler_CreateRule/缺少必填字段_-_Name (0.00s)
    --- PASS: TestRuleHandler_CreateRule/缺少必填字段_-_ProjectID (0.00s)
    --- PASS: TestRuleHandler_CreateRule/数据库错误 (0.00s)
=== RUN   TestRuleHandler_GetRule
=== RUN   TestRuleHandler_GetRule/成功获取规则
=== RUN   TestRuleHandler_GetRule/规则不存在
=== RUN   TestRuleHandler_GetRule/数据库错误
{"level":"error","ts":1763086556.582927,"caller":"logger/logger.go:99","msg":"failed to get rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).GetRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:60\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_GetRule.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:234\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_GetRule (0.00s)
    --- PASS: TestRuleHandler_GetRule/成功获取规则 (0.00s)
    --- PASS: TestRuleHandler_GetRule/规则不存在 (0.00s)
    --- PASS: TestRuleHandler_GetRule/数据库错误 (0.00s)
=== RUN   TestRuleHandler_UpdateRule
=== RUN   TestRuleHandler_UpdateRule/成功更新规则
=== RUN   TestRuleHandler_UpdateRule/无效的JSON
=== RUN   TestRuleHandler_UpdateRule/数据库错误
{"level":"error","ts":1763086556.583154,"caller":"logger/logger.go:99","msg":"failed to update rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).UpdateRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:90\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_UpdateRule.func4\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:311\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_UpdateRule (0.00s)
    --- PASS: TestRuleHandler_UpdateRule/成功更新规则 (0.00s)
    --- PASS: TestRuleHandler_UpdateRule/无效的JSON (0.00s)
    --- PASS: TestRuleHandler_UpdateRule/数据库错误 (0.00s)
=== RUN   TestRuleHandler_DeleteRule
=== RUN   TestRuleHandler_DeleteRule/成功删除规则
=== RUN   TestRuleHandler_DeleteRule/数据库错误
{"level":"error","ts":1763086556.583325,"caller":"logger/logger.go:99","msg":"failed to delete rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).DeleteRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:107\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_DeleteRule.func3\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:365\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_DeleteRule (0.00s)
    --- PASS: TestRuleHandler_DeleteRule/成功删除规则 (0.00s)
    --- PASS: TestRuleHandler_DeleteRule/数据库错误 (0.00s)
=== RUN   TestRuleHandler_ListRules
=== RUN   TestRuleHandler_ListRules/成功列出规则_-_默认参数
=== RUN   TestRuleHandler_ListRules/自定义分页参数
=== RUN   TestRuleHandler_ListRules/带过滤条件
=== RUN   TestRuleHandler_ListRules/数据库错误
{"level":"error","ts":1763086556.583731,"caller":"logger/logger.go:99","msg":"failed to list rules","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).ListRules\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:147\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_ListRules.func5\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:452\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_ListRules (0.00s)
    --- PASS: TestRuleHandler_ListRules/成功列出规则_-_默认参数 (0.00s)
    --- PASS: TestRuleHandler_ListRules/自定义分页参数 (0.00s)
    --- PASS: TestRuleHandler_ListRules/带过滤条件 (0.00s)
    --- PASS: TestRuleHandler_ListRules/数据库错误 (0.00s)
=== RUN   TestRuleHandler_EnableRule
=== RUN   TestRuleHandler_EnableRule/成功启用规则
=== RUN   TestRuleHandler_EnableRule/规则不存在
=== RUN   TestRuleHandler_EnableRule/查询时数据库错误
{"level":"error","ts":1763086556.584008,"caller":"logger/logger.go:99","msg":"failed to get rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).EnableRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:170\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_EnableRule.func5\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:537\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
=== RUN   TestRuleHandler_EnableRule/更新时数据库错误
{"level":"error","ts":1763086556.584115,"caller":"logger/logger.go:99","msg":"failed to enable rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/api.(*RuleHandler).EnableRule\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler.go:182\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/api.TestRuleHandler_EnableRule.func5\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/api/rule_handler_test.go:537\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestRuleHandler_EnableRule (0.00s)
    --- PASS: TestRuleHandler_EnableRule/成功启用规则 (0.00s)
    --- PASS: TestRuleHandler_EnableRule/规则不存在 (0.00s)
    --- PASS: TestRuleHandler_EnableRule/查询时数据库错误 (0.00s)
    --- PASS: TestRuleHandler_EnableRule/更新时数据库错误 (0.00s)
=== RUN   TestRuleHandler_DisableRule
=== RUN   TestRuleHandler_DisableRule/成功禁用规则
=== RUN   TestRuleHandler_DisableRule/规则不存在
--- PASS: TestRuleHandler_DisableRule (0.00s)
    --- PASS: TestRuleHandler_DisableRule/成功禁用规则 (0.00s)
    --- PASS: TestRuleHandler_DisableRule/规则不存在 (0.00s)
PASS
coverage: 89.5% of statements
ok  	github.com/gomockserver/mockserver/internal/api	(cached)	coverage: 89.5% of statements
=== RUN   TestLoad_ValidConfig
--- PASS: TestLoad_ValidConfig (0.00s)
=== RUN   TestLoad_FileNotFound
--- PASS: TestLoad_FileNotFound (0.00s)
=== RUN   TestLoad_InvalidYAML
--- PASS: TestLoad_InvalidYAML (0.00s)
=== RUN   TestLoad_WithoutPath
--- PASS: TestLoad_WithoutPath (0.00s)
=== RUN   TestGet
--- PASS: TestGet (0.00s)
=== RUN   TestConfig_GetAdminAddress
=== RUN   TestConfig_GetAdminAddress/默认地址
=== RUN   TestConfig_GetAdminAddress/自定义地址
=== RUN   TestConfig_GetAdminAddress/域名地址
--- PASS: TestConfig_GetAdminAddress (0.00s)
    --- PASS: TestConfig_GetAdminAddress/默认地址 (0.00s)
    --- PASS: TestConfig_GetAdminAddress/自定义地址 (0.00s)
    --- PASS: TestConfig_GetAdminAddress/域名地址 (0.00s)
=== RUN   TestConfig_GetMockAddress
=== RUN   TestConfig_GetMockAddress/默认地址
=== RUN   TestConfig_GetMockAddress/自定义地址
--- PASS: TestConfig_GetMockAddress (0.00s)
    --- PASS: TestConfig_GetMockAddress/默认地址 (0.00s)
    --- PASS: TestConfig_GetMockAddress/自定义地址 (0.00s)
=== RUN   TestLoad_CompleteConfig
--- PASS: TestLoad_CompleteConfig (0.00s)
=== RUN   TestLoad_MinimalConfig
--- PASS: TestLoad_MinimalConfig (0.00s)
=== RUN   TestLoad_PartialConfig
--- PASS: TestLoad_PartialConfig (0.00s)
=== RUN   TestConfigStructure
--- PASS: TestConfigStructure (0.00s)
PASS
coverage: 94.4% of statements
ok  	github.com/gomockserver/mockserver/internal/config	(cached)	coverage: 94.4% of statements
=== RUN   TestMatchMethod
=== RUN   TestMatchMethod/单个方法精确匹配
=== RUN   TestMatchMethod/单个方法不匹配
=== RUN   TestMatchMethod/方法数组匹配
=== RUN   TestMatchMethod/方法数组不匹配
=== RUN   TestMatchMethod/大小写不敏感
--- PASS: TestMatchMethod (0.00s)
    --- PASS: TestMatchMethod/单个方法精确匹配 (0.00s)
    --- PASS: TestMatchMethod/单个方法不匹配 (0.00s)
    --- PASS: TestMatchMethod/方法数组匹配 (0.00s)
    --- PASS: TestMatchMethod/方法数组不匹配 (0.00s)
    --- PASS: TestMatchMethod/大小写不敏感 (0.00s)
=== RUN   TestMatchPath
=== RUN   TestMatchPath/精确路径匹配
=== RUN   TestMatchPath/路径不匹配
=== RUN   TestMatchPath/路径参数匹配
=== RUN   TestMatchPath/多级路径参数匹配
=== RUN   TestMatchPath/路径段数不匹配
--- PASS: TestMatchPath (0.00s)
    --- PASS: TestMatchPath/精确路径匹配 (0.00s)
    --- PASS: TestMatchPath/路径不匹配 (0.00s)
    --- PASS: TestMatchPath/路径参数匹配 (0.00s)
    --- PASS: TestMatchPath/多级路径参数匹配 (0.00s)
    --- PASS: TestMatchPath/路径段数不匹配 (0.00s)
=== RUN   TestMatchQuery
=== RUN   TestMatchQuery/单个参数匹配
=== RUN   TestMatchQuery/多个参数全部匹配
=== RUN   TestMatchQuery/参数值不匹配
=== RUN   TestMatchQuery/缺少必需参数
=== RUN   TestMatchQuery/空条件匹配
--- PASS: TestMatchQuery (0.00s)
    --- PASS: TestMatchQuery/单个参数匹配 (0.00s)
    --- PASS: TestMatchQuery/多个参数全部匹配 (0.00s)
    --- PASS: TestMatchQuery/参数值不匹配 (0.00s)
    --- PASS: TestMatchQuery/缺少必需参数 (0.00s)
    --- PASS: TestMatchQuery/空条件匹配 (0.00s)
=== RUN   TestMatchHeaders
=== RUN   TestMatchHeaders/Content-Type匹配(不区分大小写)
=== RUN   TestMatchHeaders/自定义Header匹配
=== RUN   TestMatchHeaders/Header值不匹配
=== RUN   TestMatchHeaders/多个Header匹配
--- PASS: TestMatchHeaders (0.00s)
    --- PASS: TestMatchHeaders/Content-Type匹配(不区分大小写) (0.00s)
    --- PASS: TestMatchHeaders/自定义Header匹配 (0.00s)
    --- PASS: TestMatchHeaders/Header值不匹配 (0.00s)
    --- PASS: TestMatchHeaders/多个Header匹配 (0.00s)
=== RUN   TestSimpleMatch
=== RUN   TestSimpleMatch/完整HTTP请求匹配
=== RUN   TestSimpleMatch/路径参数匹配
=== RUN   TestSimpleMatch/方法不匹配
--- PASS: TestSimpleMatch (0.00s)
    --- PASS: TestSimpleMatch/完整HTTP请求匹配 (0.00s)
    --- PASS: TestSimpleMatch/路径参数匹配 (0.00s)
    --- PASS: TestSimpleMatch/方法不匹配 (0.00s)
=== RUN   TestNewMatchEngine
--- PASS: TestNewMatchEngine (0.00s)
=== RUN   TestMatch
=== RUN   TestMatch/成功匹配第一条规则
{"level":"info","ts":1763086555.434527,"caller":"logger/logger.go:89","msg":"rule matched","rule_id":"rule-1","rule_name":"规则1"}
=== RUN   TestMatch/匹配高优先级规则
{"level":"info","ts":1763086555.4346921,"caller":"logger/logger.go:89","msg":"rule matched","rule_id":"rule-high","rule_name":"高优先级规则"}
=== RUN   TestMatch/没有匹配的规则
=== RUN   TestMatch/空规则列表
=== RUN   TestMatch/协议类型不匹配
--- PASS: TestMatch (0.00s)
    --- PASS: TestMatch/成功匹配第一条规则 (0.00s)
    --- PASS: TestMatch/匹配高优先级规则 (0.00s)
    --- PASS: TestMatch/没有匹配的规则 (0.00s)
    --- PASS: TestMatch/空规则列表 (0.00s)
    --- PASS: TestMatch/协议类型不匹配 (0.00s)
=== RUN   TestMatchIPWhitelist
=== RUN   TestMatchIPWhitelist/IP在白名单内
=== RUN   TestMatchIPWhitelist/IP不在白名单内
=== RUN   TestMatchIPWhitelist/空白名单
=== RUN   TestMatchIPWhitelist/单个IP白名单匹配
=== RUN   TestMatchIPWhitelist/localhost匹配
--- PASS: TestMatchIPWhitelist (0.00s)
    --- PASS: TestMatchIPWhitelist/IP在白名单内 (0.00s)
    --- PASS: TestMatchIPWhitelist/IP不在白名单内 (0.00s)
    --- PASS: TestMatchIPWhitelist/空白名单 (0.00s)
    --- PASS: TestMatchIPWhitelist/单个IP白名单匹配 (0.00s)
    --- PASS: TestMatchIPWhitelist/localhost匹配 (0.00s)
=== RUN   TestSimpleMatch_WithIPWhitelist
=== RUN   TestSimpleMatch_WithIPWhitelist/IP白名单匹配成功
=== RUN   TestSimpleMatch_WithIPWhitelist/IP白名单匹配失败
=== RUN   TestSimpleMatch_WithIPWhitelist/无IP白名单限制
--- PASS: TestSimpleMatch_WithIPWhitelist (0.00s)
    --- PASS: TestSimpleMatch_WithIPWhitelist/IP白名单匹配成功 (0.00s)
    --- PASS: TestSimpleMatch_WithIPWhitelist/IP白名单匹配失败 (0.00s)
    --- PASS: TestSimpleMatch_WithIPWhitelist/无IP白名单限制 (0.00s)
=== RUN   TestMatchRule
=== RUN   TestMatchRule/简单匹配类型
=== RUN   TestMatchRule/正则匹配类型(未实现)
=== RUN   TestMatchRule/脚本匹配类型(未实现)
=== RUN   TestMatchRule/不支持的匹配类型
--- PASS: TestMatchRule (0.00s)
    --- PASS: TestMatchRule/简单匹配类型 (0.00s)
    --- PASS: TestMatchRule/正则匹配类型(未实现) (0.00s)
    --- PASS: TestMatchRule/脚本匹配类型(未实现) (0.00s)
    --- PASS: TestMatchRule/不支持的匹配类型 (0.00s)
=== RUN   TestSimpleMatch_ComplexConditions
=== RUN   TestSimpleMatch_ComplexConditions/所有条件都匹配
=== RUN   TestSimpleMatch_ComplexConditions/Query参数不完全匹配
=== RUN   TestSimpleMatch_ComplexConditions/Header不匹配
=== RUN   TestSimpleMatch_ComplexConditions/IP白名单不匹配导致整体不匹配
--- PASS: TestSimpleMatch_ComplexConditions (0.00s)
    --- PASS: TestSimpleMatch_ComplexConditions/所有条件都匹配 (0.00s)
    --- PASS: TestSimpleMatch_ComplexConditions/Query参数不完全匹配 (0.00s)
    --- PASS: TestSimpleMatch_ComplexConditions/Header不匹配 (0.00s)
    --- PASS: TestSimpleMatch_ComplexConditions/IP白名单不匹配导致整体不匹配 (0.00s)
=== RUN   TestSimpleMatch_EdgeCases
=== RUN   TestSimpleMatch_EdgeCases/空路径条件
=== RUN   TestSimpleMatch_EdgeCases/空Method条件
=== RUN   TestSimpleMatch_EdgeCases/非HTTP协议
--- PASS: TestSimpleMatch_EdgeCases (0.00s)
    --- PASS: TestSimpleMatch_EdgeCases/空路径条件 (0.00s)
    --- PASS: TestSimpleMatch_EdgeCases/空Method条件 (0.00s)
    --- PASS: TestSimpleMatch_EdgeCases/非HTTP协议 (0.00s)
PASS
coverage: 89.8% of statements
ok  	github.com/gomockserver/mockserver/internal/engine	(cached)	coverage: 89.8% of statements
=== RUN   TestCalculateDelay
=== RUN   TestCalculateDelay/固定延迟
=== RUN   TestCalculateDelay/随机延迟
=== RUN   TestCalculateDelay/正态分布延迟(暂返回均值)
=== RUN   TestCalculateDelay/无效延迟类型
--- PASS: TestCalculateDelay (0.00s)
    --- PASS: TestCalculateDelay/固定延迟 (0.00s)
    --- PASS: TestCalculateDelay/随机延迟 (0.00s)
    --- PASS: TestCalculateDelay/正态分布延迟(暂返回均值) (0.00s)
    --- PASS: TestCalculateDelay/无效延迟类型 (0.00s)
=== RUN   TestGetDefaultContentType
=== RUN   TestGetDefaultContentType/JSON
=== RUN   TestGetDefaultContentType/XML
=== RUN   TestGetDefaultContentType/HTML
=== RUN   TestGetDefaultContentType/Text
=== RUN   TestGetDefaultContentType/Binary
=== RUN   TestGetDefaultContentType/默认
--- PASS: TestGetDefaultContentType (0.00s)
    --- PASS: TestGetDefaultContentType/JSON (0.00s)
    --- PASS: TestGetDefaultContentType/XML (0.00s)
    --- PASS: TestGetDefaultContentType/HTML (0.00s)
    --- PASS: TestGetDefaultContentType/Text (0.00s)
    --- PASS: TestGetDefaultContentType/Binary (0.00s)
    --- PASS: TestGetDefaultContentType/默认 (0.00s)
=== RUN   TestStaticJSONResponse
--- PASS: TestStaticJSONResponse (0.00s)
=== RUN   TestStaticTextResponse
--- PASS: TestStaticTextResponse (0.00s)
=== RUN   TestResponseWithDelay
--- PASS: TestResponseWithDelay (0.05s)
=== RUN   TestGetDefaultResponse
--- PASS: TestGetDefaultResponse (0.00s)
=== RUN   TestUnsupportedResponseType
=== RUN   TestUnsupportedResponseType/Dynamic响应
=== RUN   TestUnsupportedResponseType/Script响应
=== RUN   TestUnsupportedResponseType/Proxy响应
--- PASS: TestUnsupportedResponseType (0.00s)
    --- PASS: TestUnsupportedResponseType/Dynamic响应 (0.00s)
    --- PASS: TestUnsupportedResponseType/Script响应 (0.00s)
    --- PASS: TestUnsupportedResponseType/Proxy响应 (0.00s)
=== RUN   TestDifferentStatusCodes
=== RUN   TestDifferentStatusCodes/È
=== RUN   TestDifferentStatusCodes/É
=== RUN   TestDifferentStatusCodes/Ì
=== RUN   TestDifferentStatusCodes/Ɛ
=== RUN   TestDifferentStatusCodes/Ɣ
=== RUN   TestDifferentStatusCodes/Ǵ
=== RUN   TestDifferentStatusCodes/Ƿ
--- PASS: TestDifferentStatusCodes (0.00s)
    --- PASS: TestDifferentStatusCodes/È (0.00s)
    --- PASS: TestDifferentStatusCodes/É (0.00s)
    --- PASS: TestDifferentStatusCodes/Ì (0.00s)
    --- PASS: TestDifferentStatusCodes/Ɛ (0.00s)
    --- PASS: TestDifferentStatusCodes/Ɣ (0.00s)
    --- PASS: TestDifferentStatusCodes/Ǵ (0.00s)
    --- PASS: TestDifferentStatusCodes/Ƿ (0.00s)
=== RUN   TestXMLResponse
--- PASS: TestXMLResponse (0.00s)
=== RUN   TestHTMLResponse
--- PASS: TestHTMLResponse (0.00s)
=== RUN   TestNonHTTPProtocol
=== RUN   TestNonHTTPProtocol/gRPC协议
=== RUN   TestNonHTTPProtocol/WebSocket协议
=== RUN   TestNonHTTPProtocol/TCP协议
--- PASS: TestNonHTTPProtocol (0.00s)
    --- PASS: TestNonHTTPProtocol/gRPC协议 (0.00s)
    --- PASS: TestNonHTTPProtocol/WebSocket协议 (0.00s)
    --- PASS: TestNonHTTPProtocol/TCP协议 (0.00s)
=== RUN   TestInvalidResponseContent
--- PASS: TestInvalidResponseContent (0.00s)
=== RUN   TestEmptyAndNilBody
=== RUN   TestEmptyAndNilBody/JSON空对象
=== RUN   TestEmptyAndNilBody/Text空字符串
=== RUN   TestEmptyAndNilBody/XML空字符串
=== RUN   TestEmptyAndNilBody/HTML空字符串
--- PASS: TestEmptyAndNilBody (0.00s)
    --- PASS: TestEmptyAndNilBody/JSON空对象 (0.00s)
    --- PASS: TestEmptyAndNilBody/Text空字符串 (0.00s)
    --- PASS: TestEmptyAndNilBody/XML空字符串 (0.00s)
    --- PASS: TestEmptyAndNilBody/HTML空字符串 (0.00s)
=== RUN   TestSpecialCharacters
=== RUN   TestSpecialCharacters/中文字符
=== RUN   TestSpecialCharacters/特殊符号
=== RUN   TestSpecialCharacters/换行和制表符
=== RUN   TestSpecialCharacters/Emoji表情
=== RUN   TestSpecialCharacters/XML特殊字符
--- PASS: TestSpecialCharacters (0.00s)
    --- PASS: TestSpecialCharacters/中文字符 (0.00s)
    --- PASS: TestSpecialCharacters/特殊符号 (0.00s)
    --- PASS: TestSpecialCharacters/换行和制表符 (0.00s)
    --- PASS: TestSpecialCharacters/Emoji表情 (0.00s)
    --- PASS: TestSpecialCharacters/XML特殊字符 (0.00s)
=== RUN   TestLargeResponseBody
--- PASS: TestLargeResponseBody (0.01s)
=== RUN   TestBinaryContentType
--- PASS: TestBinaryContentType (0.00s)
=== RUN   TestUnknownContentType
--- PASS: TestUnknownContentType (0.00s)
=== RUN   TestRandomDelayBoundary
=== RUN   TestRandomDelayBoundary/Min等于Max
=== RUN   TestRandomDelayBoundary/Min大于Max
=== RUN   TestRandomDelayBoundary/Min为0
--- PASS: TestRandomDelayBoundary (0.00s)
    --- PASS: TestRandomDelayBoundary/Min等于Max (0.00s)
    --- PASS: TestRandomDelayBoundary/Min大于Max (0.00s)
    --- PASS: TestRandomDelayBoundary/Min为0 (0.00s)
=== RUN   TestDelayWithRandomVariation
--- PASS: TestDelayWithRandomVariation (0.00s)
=== RUN   TestResponseWithCustomHeaders
--- PASS: TestResponseWithCustomHeaders (0.00s)
=== RUN   TestResponseWithoutHeaders
--- PASS: TestResponseWithoutHeaders (0.00s)
=== RUN   TestComplexJSONBody
--- PASS: TestComplexJSONBody (0.00s)
=== RUN   TestNonStringBodyForTextType
--- PASS: TestNonStringBodyForTextType (0.00s)
=== RUN   TestStepDelayType
--- PASS: TestStepDelayType (0.00s)
=== RUN   TestNormalDelayType
--- PASS: TestNormalDelayType (0.00s)
PASS
coverage: 86.0% of statements
ok  	github.com/gomockserver/mockserver/internal/executor	0.636s	coverage: 86.0% of statements
?   	github.com/gomockserver/mockserver/internal/models	[no test files]
=== RUN   TestObjectIDConversion
=== RUN   TestObjectIDConversion/有效的ObjectID
=== RUN   TestObjectIDConversion/无效的ObjectID
=== RUN   TestObjectIDConversion/空ID
=== RUN   TestObjectIDConversion/长度不够的ID
--- PASS: TestObjectIDConversion (0.00s)
    --- PASS: TestObjectIDConversion/有效的ObjectID (0.00s)
    --- PASS: TestObjectIDConversion/无效的ObjectID (0.00s)
    --- PASS: TestObjectIDConversion/空ID (0.00s)
    --- PASS: TestObjectIDConversion/长度不够的ID (0.00s)
=== RUN   TestRuleModel
--- PASS: TestRuleModel (0.00s)
=== RUN   TestProjectModel
--- PASS: TestProjectModel (0.00s)
=== RUN   TestEnvironmentModel
--- PASS: TestEnvironmentModel (0.00s)
=== RUN   TestRuleTimeStamps
--- PASS: TestRuleTimeStamps (0.01s)
=== RUN   TestFilterConstruction
=== RUN   TestFilterConstruction/项目和环境过滤
=== RUN   TestFilterConstruction/启用状态过滤
=== RUN   TestFilterConstruction/空过滤条件
--- PASS: TestFilterConstruction (0.00s)
    --- PASS: TestFilterConstruction/项目和环境过滤 (0.00s)
    --- PASS: TestFilterConstruction/启用状态过滤 (0.00s)
    --- PASS: TestFilterConstruction/空过滤条件 (0.00s)
=== RUN   TestPaginationParameters
=== RUN   TestPaginationParameters/第一页
=== RUN   TestPaginationParameters/第二页
=== RUN   TestPaginationParameters/第三页，较小pageSize
=== RUN   TestPaginationParameters/大页码
--- PASS: TestPaginationParameters (0.00s)
    --- PASS: TestPaginationParameters/第一页 (0.00s)
    --- PASS: TestPaginationParameters/第二页 (0.00s)
    --- PASS: TestPaginationParameters/第三页，较小pageSize (0.00s)
    --- PASS: TestPaginationParameters/大页码 (0.00s)
=== RUN   TestRuleValidation
=== RUN   TestRuleValidation/有效规则
=== RUN   TestRuleValidation/缺少名称
=== RUN   TestRuleValidation/缺少项目ID
=== RUN   TestRuleValidation/缺少环境ID
--- PASS: TestRuleValidation (0.00s)
    --- PASS: TestRuleValidation/有效规则 (0.00s)
    --- PASS: TestRuleValidation/缺少名称 (0.00s)
    --- PASS: TestRuleValidation/缺少项目ID (0.00s)
    --- PASS: TestRuleValidation/缺少环境ID (0.00s)
=== RUN   TestProjectValidation
=== RUN   TestProjectValidation/有效项目
=== RUN   TestProjectValidation/缺少名称
=== RUN   TestProjectValidation/缺少工作空间ID
--- PASS: TestProjectValidation (0.00s)
    --- PASS: TestProjectValidation/有效项目 (0.00s)
    --- PASS: TestProjectValidation/缺少名称 (0.00s)
    --- PASS: TestProjectValidation/缺少工作空间ID (0.00s)
=== RUN   TestEnvironmentValidation
=== RUN   TestEnvironmentValidation/有效环境
=== RUN   TestEnvironmentValidation/缺少名称
=== RUN   TestEnvironmentValidation/缺少项目ID
--- PASS: TestEnvironmentValidation (0.00s)
    --- PASS: TestEnvironmentValidation/有效环境 (0.00s)
    --- PASS: TestEnvironmentValidation/缺少名称 (0.00s)
    --- PASS: TestEnvironmentValidation/缺少项目ID (0.00s)
=== RUN   TestContextHandling
--- PASS: TestContextHandling (0.00s)
=== RUN   TestProtocolTypes
=== RUN   TestProtocolTypes/HTTP协议
=== RUN   TestProtocolTypes/WebSocket协议
=== RUN   TestProtocolTypes/gRPC协议
=== RUN   TestProtocolTypes/TCP协议
=== RUN   TestProtocolTypes/UDP协议
--- PASS: TestProtocolTypes (0.00s)
    --- PASS: TestProtocolTypes/HTTP协议 (0.00s)
    --- PASS: TestProtocolTypes/WebSocket协议 (0.00s)
    --- PASS: TestProtocolTypes/gRPC协议 (0.00s)
    --- PASS: TestProtocolTypes/TCP协议 (0.00s)
    --- PASS: TestProtocolTypes/UDP协议 (0.00s)
=== RUN   TestMatchTypes
=== RUN   TestMatchTypes/简单匹配
=== RUN   TestMatchTypes/正则匹配
=== RUN   TestMatchTypes/脚本匹配
--- PASS: TestMatchTypes (0.00s)
    --- PASS: TestMatchTypes/简单匹配 (0.00s)
    --- PASS: TestMatchTypes/正则匹配 (0.00s)
    --- PASS: TestMatchTypes/脚本匹配 (0.00s)
=== RUN   TestResponseTypes
=== RUN   TestResponseTypes/静态响应
=== RUN   TestResponseTypes/动态响应
=== RUN   TestResponseTypes/代理响应
=== RUN   TestResponseTypes/脚本响应
--- PASS: TestResponseTypes (0.00s)
    --- PASS: TestResponseTypes/静态响应 (0.00s)
    --- PASS: TestResponseTypes/动态响应 (0.00s)
    --- PASS: TestResponseTypes/代理响应 (0.00s)
    --- PASS: TestResponseTypes/脚本响应 (0.00s)
=== RUN   TestContentTypes
=== RUN   TestContentTypes/JSON
=== RUN   TestContentTypes/XML
=== RUN   TestContentTypes/HTML
=== RUN   TestContentTypes/文本
=== RUN   TestContentTypes/二进制
--- PASS: TestContentTypes (0.00s)
    --- PASS: TestContentTypes/JSON (0.00s)
    --- PASS: TestContentTypes/XML (0.00s)
    --- PASS: TestContentTypes/HTML (0.00s)
    --- PASS: TestContentTypes/文本 (0.00s)
    --- PASS: TestContentTypes/二进制 (0.00s)
=== RUN   TestDelayConfig
=== RUN   TestDelayConfig/固定延迟
=== RUN   TestDelayConfig/随机延迟
=== RUN   TestDelayConfig/正态分布延迟
--- PASS: TestDelayConfig (0.00s)
    --- PASS: TestDelayConfig/固定延迟 (0.00s)
    --- PASS: TestDelayConfig/随机延迟 (0.00s)
    --- PASS: TestDelayConfig/正态分布延迟 (0.00s)
=== RUN   TestRuleResponse
--- PASS: TestRuleResponse (0.00s)
=== RUN   TestBSONTagsPresence
--- PASS: TestBSONTagsPresence (0.00s)
PASS
coverage: 0.0% of statements
ok  	github.com/gomockserver/mockserver/internal/repository	(cached)	coverage: 0.0% of statements
=== RUN   TestNewAdminService
--- PASS: TestNewAdminService (0.00s)
=== RUN   TestCORSMiddleware
=== RUN   TestCORSMiddleware/OPTIONS_请求返回_204
=== RUN   TestCORSMiddleware/GET_请求正常处理
=== RUN   TestCORSMiddleware/POST_请求正常处理
--- PASS: TestCORSMiddleware (0.00s)
    --- PASS: TestCORSMiddleware/OPTIONS_请求返回_204 (0.00s)
    --- PASS: TestCORSMiddleware/GET_请求正常处理 (0.00s)
    --- PASS: TestCORSMiddleware/POST_请求正常处理 (0.00s)
=== RUN   TestHealthCheck
--- PASS: TestHealthCheck (0.00s)
=== RUN   TestGetVersion
--- PASS: TestGetVersion (0.00s)
=== RUN   TestAdminServiceRoutes
=== RUN   TestAdminServiceRoutes/健康检查路由
=== RUN   TestAdminServiceRoutes/版本信息路由
--- PASS: TestAdminServiceRoutes (0.00s)
    --- PASS: TestAdminServiceRoutes/健康检查路由 (0.00s)
    --- PASS: TestAdminServiceRoutes/版本信息路由 (0.00s)
=== RUN   TestCORSMiddleware_OptionsRequest
--- PASS: TestCORSMiddleware_OptionsRequest (0.00s)
=== RUN   TestCORSMiddleware_Headers
--- PASS: TestCORSMiddleware_Headers (0.00s)
=== RUN   TestNewMockService
--- PASS: TestNewMockService (0.00s)
=== RUN   TestMockService_HandleMockRequest_MissingParams
=== RUN   TestMockService_HandleMockRequest_MissingParams/缺少_projectID
=== RUN   TestMockService_HandleMockRequest_MissingParams/缺少_environmentID
--- PASS: TestMockService_HandleMockRequest_MissingParams (0.00s)
    --- PASS: TestMockService_HandleMockRequest_MissingParams/缺少_projectID (0.00s)
    --- PASS: TestMockService_HandleMockRequest_MissingParams/缺少_environmentID (0.00s)
=== RUN   TestMockService_HandleMockRequest_MatchRuleError
{"level":"error","ts":1763086557.126615,"caller":"logger/logger.go:99","msg":"failed to match rule","error":"database error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/service.(*MockService).HandleMockRequest\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/service/mock_service.go:68\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/service.TestMockService_HandleMockRequest_MatchRuleError\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/service/mock_service_test.go:119\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestMockService_HandleMockRequest_MatchRuleError (0.00s)
=== RUN   TestMockService_HandleMockRequest_NoRuleMatched
{"level":"info","ts":1763086557.126915,"caller":"logger/logger.go:89","msg":"no rule matched, using default response","path":"/project-001/env-001/api/test","project_id":"project-001","environment_id":"env-001"}
--- PASS: TestMockService_HandleMockRequest_NoRuleMatched (0.00s)
=== RUN   TestMockService_HandleMockRequest_ExecuteError
{"level":"error","ts":1763086557.127242,"caller":"logger/logger.go:99","msg":"failed to execute mock","error":"execution error","stacktrace":"github.com/gomockserver/mockserver/pkg/logger.Error\n\t/Users/huangzhonghui/aicoding/gomockserver/pkg/logger/logger.go:99\ngithub.com/gomockserver/mockserver/internal/service.(*MockService).HandleMockRequest\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/service/mock_service.go:88\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/huangzhonghui/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\ngithub.com/gomockserver/mockserver/internal/service.TestMockService_HandleMockRequest_ExecuteError\n\t/Users/huangzhonghui/aicoding/gomockserver/internal/service/mock_service_test.go:187\ntesting.tRunner\n\t/opt/homebrew/Cellar/go/1.25.4/libexec/src/testing/testing.go:1934"}
--- PASS: TestMockService_HandleMockRequest_ExecuteError (0.00s)
=== RUN   TestMockService_HandleMockRequest_Success
--- PASS: TestMockService_HandleMockRequest_Success (0.00s)
=== RUN   TestMockService_HandleMockRequest_WithBody
--- PASS: TestMockService_HandleMockRequest_WithBody (0.00s)
=== RUN   TestMockService_HandleMockRequest_WithHeaders
--- PASS: TestMockService_HandleMockRequest_WithHeaders (0.00s)
=== RUN   TestMockService_HandleMockRequest_DifferentMethods
=== RUN   TestMockService_HandleMockRequest_DifferentMethods/GET
=== RUN   TestMockService_HandleMockRequest_DifferentMethods/POST
=== RUN   TestMockService_HandleMockRequest_DifferentMethods/PUT
=== RUN   TestMockService_HandleMockRequest_DifferentMethods/DELETE
=== RUN   TestMockService_HandleMockRequest_DifferentMethods/PATCH
--- PASS: TestMockService_HandleMockRequest_DifferentMethods (0.00s)
    --- PASS: TestMockService_HandleMockRequest_DifferentMethods/GET (0.00s)
    --- PASS: TestMockService_HandleMockRequest_DifferentMethods/POST (0.00s)
    --- PASS: TestMockService_HandleMockRequest_DifferentMethods/PUT (0.00s)
    --- PASS: TestMockService_HandleMockRequest_DifferentMethods/DELETE (0.00s)
    --- PASS: TestMockService_HandleMockRequest_DifferentMethods/PATCH (0.00s)
PASS
coverage: 45.6% of statements
ok  	github.com/gomockserver/mockserver/internal/service	(cached)	coverage: 45.6% of statements
