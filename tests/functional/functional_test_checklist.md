# Mock Server 功能测试检查清单

## 文档信息

| 项目 | 内容 |
|------|------|
| 测试类型 | 手工功能测试 |
| 创建日期 | 2025-11-14 |
| 测试人员 | [填写姓名] |
| 测试环境 | [填写环境信息] |

## 使用说明

1. 按照测试优先级（P0 → P1 → P2）逐项执行测试
2. 在"实际结果"列填写实际观察到的现象
3. 在"通过状态"列填写：**通过** / **失败** / **阻塞** / **跳过**
4. 在"备注"列记录问题、截图文件名、建议等
5. 完成后统计通过率，提交测试报告

## 一、项目管理功能测试（边界场景）

| 测试项编号 | 测试场景 | 测试优先级 | 测试步骤 | 预期结果 | 实际结果 | 通过状态 | 备注 |
|-----------|---------|-----------|---------|---------|---------|---------|------|
| PRJ-007 | 创建重名项目 | P1 | 1. 创建项目"TestProject"<br>2. 再次创建同名项目"TestProject" | 返回错误提示，不允许创建重名项目 | | | |
| PRJ-008 | 项目名称为空 | P1 | 1. 创建项目，name字段为空字符串"" | 返回参数验证错误 | | | |
| PRJ-009 | 项目名称超长 | P2 | 1. 创建项目，name为256字符长度的字符串 | 返回名称过长错误或成功创建（根据限制） | | | |
| PRJ-010 | 项目描述包含特殊字符 | P2 | 1. 创建项目，description包含<>'"&等特殊字符 | 成功创建，特殊字符被正确转义或保存 | | | |
| PRJ-011 | 删除包含环境的项目 | P1 | 1. 创建项目<br>2. 在项目下创建环境<br>3. 删除项目 | 根据设计：级联删除或提示存在关联数据 | | | |
| PRJ-012 | 删除包含规则的项目 | P1 | 1. 创建项目<br>2. 创建环境和规则<br>3. 删除项目 | 根据设计：级联删除或提示存在关联数据 | | | |
| PRJ-013 | 查询不存在的项目 | P1 | 1. 使用不存在的项目ID查询项目详情 | 返回404或项目不存在错误 | | | |
| PRJ-014 | 使用无效的项目ID格式 | P2 | 1. 使用无效ID格式（如"abc"）查询项目 | 返回ID格式错误或404 | | | |

## 二、环境管理功能测试（边界场景）

| 测试项编号 | 测试场景 | 测试优先级 | 测试步骤 | 预期结果 | 实际结果 | 通过状态 | 备注 |
|-----------|---------|-----------|---------|---------|---------|---------|------|
| ENV-007 | 同一项目下创建重名环境 | P1 | 1. 在项目A下创建环境"dev"<br>2. 在同一项目下再次创建环境"dev" | 返回错误提示，不允许同项目下重名 | | | |
| ENV-008 | 环境名称为空 | P1 | 1. 创建环境，name字段为空字符串 | 返回参数验证错误 | | | |
| ENV-009 | 环境base_url格式验证 | P1 | 1. 创建环境，base_url为"invalid-url"<br>2. 创建环境，base_url为"ftp://test" | URL格式验证失败或成功（根据设计） | | | |
| ENV-010 | 删除包含规则的环境 | P1 | 1. 创建环境<br>2. 创建规则<br>3. 删除环境 | 根据设计：级联删除或提示存在关联规则 | | | |
| ENV-011 | 查询不存在项目的环境 | P2 | 1. 使用不存在的project_id查询环境列表 | 返回空列表或项目不存在错误 | | | |
| ENV-012 | 跨项目查询环境 | P2 | 1. 创建项目A和环境E1<br>2. 使用项目B的ID查询环境E1 | 环境不可见或返回404 | | | |

## 三、规则管理功能测试（边界场景）

| 测试项编号 | 测试场景 | 测试优先级 | 测试步骤 | 预期结果 | 实际结果 | 通过状态 | 备注 |
|-----------|---------|-----------|---------|---------|---------|---------|------|
| RULE-010 | 规则优先级排序验证 | P0 | 1. 创建优先级1000的规则R1<br>2. 创建优先级100的规则R2<br>3. 匹配相同路径的请求 | R1优先匹配 | | | |
| RULE-011 | 规则名称为空 | P1 | 1. 创建规则，name字段为空 | 返回参数验证错误 | | | |
| RULE-012 | 规则优先级为负数 | P2 | 1. 创建规则，priority为-100 | 接受负数或返回验证错误 | | | |
| RULE-013 | 规则优先级为零 | P2 | 1. 创建规则，priority为0 | 成功创建 | | | |
| RULE-014 | 路径匹配条件为空 | P1 | 1. 创建规则，match_condition.path为空 | 返回验证错误 | | | |
| RULE-015 | 响应内容为空 | P1 | 1. 创建规则，response.content.body为空对象{} | 成功创建，返回空对象 | | | |
| RULE-016 | 响应状态码非标准值 | P2 | 1. 创建规则，status_code为999 | 成功创建或返回验证错误 | | | |
| RULE-017 | 同时创建多条相同规则 | P1 | 1. 并发创建2条完全相同的规则 | 都成功创建（按优先级匹配）或返回重复错误 | | | |
| RULE-018 | 查询不存在的规则 | P1 | 1. 使用不存在的规则ID查询 | 返回404或规则不存在错误 | | | |
| RULE-019 | 按项目ID过滤规则 | P1 | 1. 创建多个项目和规则<br>2. 按project_id过滤查询 | 仅返回该项目下的规则 | | | |
| RULE-020 | 按环境ID过滤规则 | P1 | 1. 创建多个环境和规则<br>2. 按environment_id过滤查询 | 仅返回该环境下的规则 | | | |

## 四、Mock服务功能测试（扩展场景）

| 测试项编号 | 测试场景 | 测试优先级 | 测试步骤 | 预期结果 | 实际结果 | 通过状态 | 备注 |
|-----------|---------|-----------|---------|---------|---------|---------|------|
| MOCK-003 | PUT请求Mock响应 | P1 | 1. 创建PUT方法规则<br>2. 发送PUT请求 | 返回Mock响应 | | | |
| MOCK-004 | DELETE请求Mock响应 | P1 | 1. 创建DELETE方法规则<br>2. 发送DELETE请求 | 返回Mock响应 | | | |
| MOCK-007 | 路径精确匹配 | P0 | 1. 创建/api/users规则<br>2. 请求/api/users和/api/users/ | 根据规则匹配逻辑返回响应 | | | |
| MOCK-008 | 路径参数匹配 | P0 | 1. 创建/api/users/:id规则<br>2. 请求/api/users/123 | 成功匹配，返回响应 | | | |
| MOCK-009 | Query参数匹配 | P1 | 1. 创建规则匹配?status=active<br>2. 请求带query参数 | 成功匹配 | | | |
| MOCK-010 | Header匹配 | P1 | 1. 创建规则匹配特定Header<br>2. 发送带Header的请求 | 成功匹配 | | | |
| MOCK-011 | 请求方法匹配 | P0 | 1. 创建GET方法规则<br>2. 发送POST请求到同一路径 | 不匹配，返回404 | | | |
| MOCK-013 | 禁用规则不返回响应 | P0 | 1. 创建并禁用规则<br>2. 发送匹配请求 | 返回404，规则不生效 | | | |
| MOCK-014 | 多规则优先级匹配 | P0 | 1. 创建同路径不同优先级规则<br>2. 发送请求 | 匹配高优先级规则 | | | |
| MOCK-015 | JSON响应格式正确 | P0 | 1. 创建JSON格式响应规则<br>2. 检查响应Content-Type和格式 | Content-Type: application/json，格式正确 | | | |
| MOCK-016 | XML响应格式正确 | P1 | 1. 创建XML格式响应规则<br>2. 检查响应格式 | Content-Type: text/xml，格式正确 | | | |
| MOCK-017 | HTML响应格式正确 | P1 | 1. 创建HTML格式响应规则<br>2. 检查响应格式 | Content-Type: text/html，格式正确 | | | |
| MOCK-018 | Text响应格式正确 | P1 | 1. 创建Text格式响应规则<br>2. 检查响应格式 | Content-Type: text/plain，格式正确 | | | |
| MOCK-019 | 固定延迟响应时间准确 | P1 | 1. 创建2秒固定延迟规则<br>2. 测量实际响应时间 | 响应时间约2秒（±200ms） | | | |
| MOCK-020 | 随机延迟响应时间范围 | P2 | 1. 创建1-3秒随机延迟规则<br>2. 多次请求测量时间 | 响应时间在1-3秒范围内 | | | |
| MOCK-021 | 项目ID错误的请求 | P1 | 1. 使用错误的项目ID发送请求 | 返回404或项目不存在错误 | | | |
| MOCK-022 | 环境ID错误的请求 | P1 | 1. 使用错误的环境ID发送请求 | 返回404或环境不存在错误 | | | |
| MOCK-023 | 路径不存在的请求 | P1 | 1. 请求没有匹配规则的路径 | 返回404 | | | |
| MOCK-024 | 并发请求处理正确 | P1 | 1. 使用工具并发发送100个请求<br>2. 检查所有响应 | 所有请求都正确响应 | | | |
| MOCK-025 | 大请求体处理 | P2 | 1. 发送5MB请求体的POST请求 | 成功处理或返回请求体过大错误 | | | |
| MOCK-026 | 大响应体返回 | P2 | 1. 创建5MB响应体的规则<br>2. 请求并验证 | 成功返回完整响应 | | | |

## 五、数据管理功能测试

| 测试项编号 | 测试场景 | 测试优先级 | 测试步骤 | 预期结果 | 实际结果 | 通过状态 | 备注 |
|-----------|---------|-----------|---------|---------|---------|---------|------|
| DATA-001 | 数据持久化验证 | P0 | 1. 创建项目、环境、规则<br>2. 查询MongoDB数据库<br>3. 验证数据正确保存 | 数据在MongoDB中正确存储 | | | |
| DATA-002 | 服务重启后数据保留 | P0 | 1. 创建测试数据<br>2. 重启Mock Server<br>3. 查询数据 | 数据完整保留 | | | |
| DATA-003 | 批量删除规则 | P1 | 1. 创建10条规则<br>2. 批量删除（如果支持） | 所有规则被删除 | | | |
| DATA-004 | 数据库连接失败处理 | P1 | 1. 停止MongoDB服务<br>2. 尝试API操作<br>3. 观察错误处理 | 返回数据库连接错误，服务不崩溃 | | | |
| DATA-005 | 数据库查询异常处理 | P2 | 1. 模拟数据库异常<br>2. 观察系统行为 | 正确处理异常，返回友好错误信息 | | | |

## 测试统计

| 统计项 | 数量 |
|-------|------|
| 总测试项 | 50 |
| P0测试项 | 10 |
| P1测试项 | 28 |
| P2测试项 | 12 |
| 已执行 | 0 |
| 通过 | 0 |
| 失败 | 0 |
| 跳过 | 0 |
| 通过率 | 0% |

## 缺陷记录

| 缺陷ID | 发现日期 | 测试项 | 缺陷描述 | 严重程度 | 状态 |
|-------|---------|--------|---------|---------|------|
| | | | | | |

## 测试结论

[在此填写测试结论]

## 测试建议

[在此填写改进建议]

---

**测试开始时间**: [填写]  
**测试结束时间**: [填写]  
**测试人员**: [填写]  
**审核人员**: [填写]
