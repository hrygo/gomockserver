# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹ Mock Server é¡¹ç›®çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ã€‚

## ç›®å½•

- [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)
- [å¦‚ä½•è´¡çŒ®](#å¦‚ä½•è´¡çŒ®)
- [å¼€å‘æµç¨‹](#å¼€å‘æµç¨‹)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æµ‹è¯•è¦æ±‚](#æµ‹è¯•è¦æ±‚)
- [æäº¤è§„èŒƒ](#æäº¤è§„èŒƒ)
- [é—®é¢˜åé¦ˆ](#é—®é¢˜åé¦ˆ)

## è¡Œä¸ºå‡†åˆ™

å‚ä¸æœ¬é¡¹ç›®å³è¡¨ç¤ºæ‚¨åŒæ„éµå®ˆæˆ‘ä»¬çš„è¡Œä¸ºå‡†åˆ™ã€‚è¯·ä¿æŒå‹å–„ã€å°Šé‡å’Œä¸“ä¸šã€‚

## å¦‚ä½•è´¡çŒ®

### æŠ¥å‘Š Bug

å¦‚æœæ‚¨å‘ç° Bugï¼Œè¯·é€šè¿‡ GitHub Issues æŠ¥å‘Šï¼š

1. ä½¿ç”¨æè¿°æ€§çš„æ ‡é¢˜
2. æä¾›è¯¦ç»†çš„å¤ç°æ­¥éª¤
3. è¯´æ˜é¢„æœŸè¡Œä¸ºå’Œå®é™…è¡Œä¸º
4. é™„ä¸Šç¯å¢ƒä¿¡æ¯ï¼ˆGo ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰
5. å¦‚æœ‰å¯èƒ½ï¼Œæä¾›æœ€å°åŒ–çš„å¤ç°ç¤ºä¾‹

**Bug æŠ¥å‘Šæ¨¡æ¿ï¼š**

```markdown
### é—®é¢˜æè¿°
ç®€è¦æè¿°é—®é¢˜

### å¤ç°æ­¥éª¤
1. ç¬¬ä¸€æ­¥
2. ç¬¬äºŒæ­¥
3. ...

### é¢„æœŸè¡Œä¸º
åº”è¯¥å‘ç”Ÿä»€ä¹ˆ

### å®é™…è¡Œä¸º
å®é™…å‘ç”Ÿäº†ä»€ä¹ˆ

### ç¯å¢ƒä¿¡æ¯
- Go ç‰ˆæœ¬ï¼š
- æ“ä½œç³»ç»Ÿï¼š
- Mock Server ç‰ˆæœ¬ï¼š
- MongoDB ç‰ˆæœ¬ï¼š

### é™„åŠ ä¿¡æ¯
æ—¥å¿—ã€æˆªå›¾æˆ–å…¶ä»–ç›¸å…³ä¿¡æ¯
```

### æå‡ºæ–°åŠŸèƒ½

åœ¨æå‡ºæ–°åŠŸèƒ½å»ºè®®å‰ï¼Œè¯·å…ˆæŸ¥çœ‹ï¼š

1. æ˜¯å¦å·²æœ‰ç±»ä¼¼çš„ Issue æˆ– PR
2. åŠŸèƒ½æ˜¯å¦ç¬¦åˆé¡¹ç›®å®šä½
3. æ˜¯å¦æ„¿æ„è‡ªå·±å®ç°è¯¥åŠŸèƒ½

**åŠŸèƒ½è¯·æ±‚æ¨¡æ¿ï¼š**

```markdown
### åŠŸèƒ½æè¿°
æ¸…æ™°æè¿°æ‚¨æƒ³è¦çš„åŠŸèƒ½

### ä½¿ç”¨åœºæ™¯
ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Ÿè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

### å»ºè®®çš„å®ç°æ–¹æ¡ˆ
ï¼ˆå¯é€‰ï¼‰æ‚¨è®¤ä¸ºå¦‚ä½•å®ç°è¿™ä¸ªåŠŸèƒ½

### æ›¿ä»£æ–¹æ¡ˆ
ï¼ˆå¯é€‰ï¼‰æ˜¯å¦è€ƒè™‘è¿‡å…¶ä»–æ–¹æ¡ˆ
```

### æäº¤ä»£ç 

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼ˆ`git checkout -b feature/amazing-feature`ï¼‰
3. ç¼–å†™ä»£ç å¹¶æ·»åŠ æµ‹è¯•
4. ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
5. æäº¤æ›´æ”¹ï¼ˆ`git commit -m 'Add some amazing feature'`ï¼‰
6. æ¨é€åˆ°åˆ†æ”¯ï¼ˆ`git push origin feature/amazing-feature`ï¼‰
7. åˆ›å»º Pull Request

## å¼€å‘æµç¨‹

### å‡†å¤‡å¼€å‘ç¯å¢ƒ

1. **å®‰è£…ä¾èµ–**

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/gomockserver/mockserver.git
cd mockserver

# å®‰è£… Go ä¾èµ–
go mod download

# å¯åŠ¨ MongoDB
docker run -d -p 27017:27017 --name mongodb mongo:6.0
```

2. **è¿è¡Œé¡¹ç›®**

```bash
# ç¼–è¯‘
make build

# è¿è¡Œ
make run

# æˆ–ç›´æ¥è¿è¡Œ
go run cmd/mockserver/main.go
```

3. **è¿è¡Œæµ‹è¯•**

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test

# è¿è¡Œå•å…ƒæµ‹è¯•
make test-unit

# è¿è¡Œé›†æˆæµ‹è¯•
make test-integration

# æŸ¥çœ‹è¦†ç›–ç‡
make coverage
```

### é¡¹ç›®ç»“æ„

```
gomockserver/
â”œâ”€â”€ cmd/                    # å¯æ‰§è¡Œç¨‹åºå…¥å£
â”‚   â””â”€â”€ mockserver/        # ä¸»ç¨‹åº
â”œâ”€â”€ internal/              # å†…éƒ¨ä»£ç ï¼ˆä¸å¯¹å¤–æš´éœ²ï¼‰
â”‚   â”œâ”€â”€ adapter/          # åè®®é€‚é…å™¨
â”‚   â”œâ”€â”€ api/              # API å¤„ç†å™¨
â”‚   â”œâ”€â”€ config/           # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ engine/           # è§„åˆ™åŒ¹é…å¼•æ“
â”‚   â”œâ”€â”€ executor/         # Mock æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ repository/       # æ•°æ®è®¿é—®å±‚
â”‚   â””â”€â”€ service/          # æœåŠ¡å±‚
â”œâ”€â”€ pkg/                   # å…¬å…±åº“ï¼ˆå¯å¯¹å¤–æš´éœ²ï¼‰
â”‚   â”œâ”€â”€ logger/           # æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ utils/            # é€šç”¨å·¥å…·
â”œâ”€â”€ tests/                 # æµ‹è¯•ç›¸å…³
â”‚   â”œâ”€â”€ integration/      # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ performance/      # æ€§èƒ½æµ‹è¯•
â”‚   â””â”€â”€ smoke/            # å†’çƒŸæµ‹è¯•
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”œâ”€â”€ tests/                 # æµ‹è¯•å’Œè„šæœ¬å·¥å…·
â””â”€â”€ docker/                # Docker ç›¸å…³
```

## ä»£ç è§„èŒƒ

### Go ä»£ç è§„èŒƒ

éµå¾ª [Effective Go](https://golang.org/doc/effective_go.html) å’Œ [Go Code Review Comments](https://github.com/golang/go/wiki/CodeReviewComments)ã€‚

**åŸºæœ¬è§„åˆ™ï¼š**

1. **æ ¼å¼åŒ–**ï¼šä½¿ç”¨ `gofmt` æˆ– `goimports`
2. **å‘½å**ï¼š
   - åŒ…åï¼šå°å†™ï¼Œç®€çŸ­ï¼Œä¸ä½¿ç”¨ä¸‹åˆ’çº¿æˆ–é©¼å³°
   - å¯¼å‡ºæ ‡è¯†ç¬¦ï¼šä½¿ç”¨å¤§é©¼å³°ï¼ˆPascalCaseï¼‰
   - éå¯¼å‡ºæ ‡è¯†ç¬¦ï¼šä½¿ç”¨å°é©¼å³°ï¼ˆcamelCaseï¼‰
   - å¸¸é‡ï¼šæ ¹æ®ä½œç”¨åŸŸä½¿ç”¨å¤§é©¼å³°æˆ–å°é©¼å³°
3. **æ³¨é‡Š**ï¼š
   - æ‰€æœ‰å¯¼å‡ºçš„å‡½æ•°ã€ç±»å‹éƒ½åº”æœ‰æ³¨é‡Š
   - æ³¨é‡Šä»¥åç§°å¼€å¤´
   - ä½¿ç”¨å®Œæ•´çš„å¥å­
4. **é”™è¯¯å¤„ç†**ï¼š
   - ä¸è¦å¿½ç•¥é”™è¯¯
   - é”™è¯¯ä¿¡æ¯ä½¿ç”¨å°å†™ï¼Œä¸ä»¥æ ‡ç‚¹ç»“å°¾
   - ä½¿ç”¨ `fmt.Errorf` åŒ…è£…é”™è¯¯
5. **å¹¶å‘**ï¼šæ³¨æ„ goroutine æ³„æ¼å’Œæ•°æ®ç«äº‰

**ä»£ç ç¤ºä¾‹ï¼š**

```go
// GoodExample è¿™æ˜¯ä¸€ä¸ªå¥½çš„ç¤ºä¾‹å‡½æ•°
// å®ƒå±•ç¤ºäº†æ­£ç¡®çš„å‘½åã€æ³¨é‡Šå’Œé”™è¯¯å¤„ç†
func GoodExample(input string) (string, error) {
    if input == "" {
        return "", fmt.Errorf("input cannot be empty")
    }
    
    result, err := processInput(input)
    if err != nil {
        return "", fmt.Errorf("failed to process input: %w", err)
    }
    
    return result, nil
}
```

### ä»£ç è´¨é‡æ£€æŸ¥

åœ¨æäº¤å‰è¿è¡Œï¼š

```bash
# ä»£ç æ ¼å¼åŒ–
make fmt

# ä»£ç æ£€æŸ¥
make lint

# è¿è¡Œæµ‹è¯•
make test
```

## æµ‹è¯•è¦æ±‚

### å•å…ƒæµ‹è¯•

- æ‰€æœ‰æ–°åŠŸèƒ½å¿…é¡»åŒ…å«å•å…ƒæµ‹è¯•
- æ ¸å¿ƒæ¨¡å—çš„è¦†ç›–ç‡åº” > 80%
- æµ‹è¯•æ–‡ä»¶å‘½åï¼š`*_test.go`
- ä½¿ç”¨ `testify` è¿›è¡Œæ–­è¨€

**ç¤ºä¾‹ï¼š**

```go
func TestMatchEngine_Match(t *testing.T) {
    tests := []struct {
        name    string
        rule    *models.Rule
        request *adapter.Request
        want    bool
    }{
        {
            name: "ç²¾ç¡®è·¯å¾„åŒ¹é…",
            rule: &models.Rule{
                MatchCondition: models.MatchCondition{
                    Method: "GET",
                    Path:   "/api/users",
                },
            },
            request: &adapter.Request{
                Method: "GET",
                Path:   "/api/users",
            },
            want: true,
        },
        // æ›´å¤šæµ‹è¯•ç”¨ä¾‹...
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            // æµ‹è¯•å®ç°
            got := match(tt.rule, tt.request)
            assert.Equal(t, tt.want, got)
        })
    }
}
```

### é›†æˆæµ‹è¯•

- æµ‹è¯•å®Œæ•´çš„ä¸šåŠ¡æµç¨‹
- ä½¿ç”¨ Docker æµ‹è¯•ç¯å¢ƒ
- æµ‹è¯•æ–‡ä»¶æ”¾åœ¨ `tests/integration/`

### æ€§èƒ½æµ‹è¯•

- å…³é”®è·¯å¾„éœ€è¦æ€§èƒ½æµ‹è¯•
- ä½¿ç”¨ Go benchmark æˆ– wrk
- æ–‡æ¡£åŒ–æ€§èƒ½åŸºå‡†

## æäº¤è§„èŒƒ

### Commit Message æ ¼å¼

ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type ç±»å‹ï¼š**

- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œï¼‰
- `refactor`: é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°åŠŸèƒ½ä¹Ÿä¸æ˜¯ Bug ä¿®å¤ï¼‰
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

**ç¤ºä¾‹ï¼š**

```bash
feat(engine): æ·»åŠ æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ”¯æŒ

å®ç°äº†åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„è·¯å¾„åŒ¹é…åŠŸèƒ½ï¼Œæ”¯æŒæ›´çµæ´»çš„è§„åˆ™é…ç½®ã€‚

Closes #123
```

### Pull Request

**PR æ ‡é¢˜æ ¼å¼ï¼š**

```
[Type] Brief description
```

**PR æè¿°æ¨¡æ¿ï¼š**

```markdown
## å˜æ›´è¯´æ˜
ç®€è¦æè¿°æœ¬ PR çš„å˜æ›´å†…å®¹

## å˜æ›´ç±»å‹
- [ ] æ–°åŠŸèƒ½
- [ ] Bug ä¿®å¤
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] é‡æ„
- [ ] æµ‹è¯•
- [ ] å…¶ä»–

## ç›¸å…³ Issue
Closes #issue_number

## æµ‹è¯•
è¯´æ˜å¦‚ä½•æµ‹è¯•è¿™äº›å˜æ›´

## æ£€æŸ¥æ¸…å•
- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] å·²æ·»åŠ å¿…è¦çš„æµ‹è¯•
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] å·²æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] Commit æ¶ˆæ¯ç¬¦åˆè§„èŒƒ
```

### Code Review

**å®¡æŸ¥é‡ç‚¹ï¼š**

1. ä»£ç è´¨é‡å’Œå¯è¯»æ€§
2. æµ‹è¯•è¦†ç›–ç‡
3. æ€§èƒ½å½±å“
4. å‘åå…¼å®¹æ€§
5. æ–‡æ¡£å®Œæ•´æ€§

**åé¦ˆæŒ‡å—ï¼š**

- æå‡ºå»ºè®¾æ€§æ„è§
- è¯´æ˜ç†ç”±
- æä¾›å…·ä½“å»ºè®®
- ä¿æŒå‹å¥½å’Œå°Šé‡

## é—®é¢˜åé¦ˆ

### å®‰å…¨é—®é¢˜

å¦‚æœå‘ç°å®‰å…¨æ¼æ´ï¼Œè¯·**ä¸è¦**å…¬å¼€æŠ¥å‘Šã€‚è¯·å‘é€é‚®ä»¶è‡³ï¼š

**security@gomockserver.com**

æˆ‘ä»¬ä¼šå°½å¿«å“åº”å¹¶å¤„ç†ã€‚

### ä¸€èˆ¬é—®é¢˜

- GitHub Issuesï¼šåŠŸèƒ½è¯·æ±‚ã€Bug æŠ¥å‘Š
- GitHub Discussionsï¼šä¸€èˆ¬è®¨è®ºã€é—®é¢˜å’¨è¯¢
- Emailï¼šsupport@gomockserver.com

## å¼€å‘å·¥å…·æ¨è

### IDE é…ç½®

**VS Code**

æ¨èæ’ä»¶ï¼š
- Go (golang.go)
- Go Test Explorer
- GitLens
- MongoDB for VS Code

**GoLand**

- å†…ç½®å®Œæ•´çš„ Go æ”¯æŒ
- é›†æˆæµ‹è¯•è¿è¡Œå™¨

### å¸¸ç”¨å‘½ä»¤

```bash
# æ„å»º
make build

# è¿è¡Œ
make run

# æµ‹è¯•
make test          # æ‰€æœ‰æµ‹è¯•
make test-unit     # å•å…ƒæµ‹è¯•
make test-int      # é›†æˆæµ‹è¯•

# ä»£ç è´¨é‡
make fmt           # æ ¼å¼åŒ–
make lint          # ä»£ç æ£€æŸ¥
make vet           # Go vet

# è¦†ç›–ç‡
make coverage      # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š

# Docker
make docker-build  # æ„å»ºé•œåƒ
make docker-run    # è¿è¡Œå®¹å™¨
make docker-test   # Docker æµ‹è¯•ç¯å¢ƒ
```

## å‘å¸ƒæµç¨‹

1. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰
2. æ›´æ–° CHANGELOG.md
3. åˆ›å»º Release PR
4. åˆå¹¶åæ‰“æ ‡ç­¾
5. GitHub Actions è‡ªåŠ¨å‘å¸ƒ

## è·å¾—å¸®åŠ©

å¦‚æœæ‚¨åœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ç°æœ‰æ–‡æ¡£å’Œ Issues
2. åœ¨ GitHub Discussions æé—®
3. è”ç³»ç»´æŠ¤è€…

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„ä»˜å‡ºï¼æ‚¨çš„æ¯ä¸€ä¸ªè´¡çŒ®éƒ½è®©è¿™ä¸ªé¡¹ç›®å˜å¾—æ›´å¥½ã€‚

---

**Happy Coding! ğŸš€**
